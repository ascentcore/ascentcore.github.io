!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const r={populationSize:500,workerPercent:.7,commercialAreas:6,socialAreas:5,visitProbability:1e-4,socialProbability:2e-4,mapSize:[30,30],virus:{startManifest:2,manifestUpTo:6,spreadProbability:.04,recoveryTime:4,mortality:.09,reinfectProbability:.001}};function a(e,t,n){const{x:r,y:a,type:i}=t;switch(i){case 0:e.fillStyle="rgba(0,255,0,0.4)";break;case 1:e.fillStyle="rgba(0,0,255,0.4)";break;case 2:e.fillStyle="rgba(240,124,64,0.4)";break;case 3:e.fillStyle="rgba(64,64,64,0.4)";break;case 4:e.fillStyle="rgba(255,64,255,0.4)"}e.fillRect(r*n-n/2,a*n-n/2,n,n),e.strokeStyle="rgba(0,0,0,0.3)",e.strokeRect(r*n-n/2,a*n-n/2,n,n),e.stroke()}function i(e){const t=Object.assign({},r,e),{populationSize:n,workerPercent:i,commercialAreas:l,socialAreas:s,virus:c,visitProbability:f,socialProbability:d}=t,{startManifest:u,manifestUpTo:m,spreadProbability:p,mortality:h,recoveryTime:y,reinfectProbability:b}=c,g=Math.floor(Math.sqrt(n))+l+s;t.mapSize=[g,g];const{mapSize:M}=t;let T=0,v=0,x=0,k=!1;const S={infected:new Array(300).fill(0),hospitalized:new Array(300).fill(0),dead:new Array(300).fill(0)};function w(e,t){S[e].splice(0,1),S[e].push(t)}const P=document.createElement("span");P.style="display: inline-block; padding: 10px; border: 1px solid #000; margin: 5px;";const A=document.createElement("canvas");P.appendChild(A);const E=document.createElement("button");E.innerText="Infect",E.className="waves-effect waves-light btn-small",E.onclick=()=>{R(H.find(e=>!e.infected))};const C=document.createElement("div");C.className="sim-control",C.style="margin-top: 10px",C.innerHTML='<label>\n        <input type="checkbox"  />\n        <span>Force Isolation</span>\n    </label>',C.appendChild(E),P.appendChild(C),C.querySelector("input").onchange=e=>{k=e.target.checked},A.setAttribute("width",300),A.setAttribute("height",360);const z=300/M[0],O={},j=[],U=[],$=[],H=[],q=e=>{let t;for(;!t;){const n=1+Math.floor(Math.random()*(M[0]-1)),r=1+Math.floor(Math.random()*(M[1]-1)),a=`${n}-${r}`;O[a]||(t=Object.assign({},e,{x:n,y:r}),O[a]=t)}return t},I=q({type:2});for(let e=0;e<l;e++){const e=q({type:1});U.push(e)}for(let e=0;e<s;e++){const e=q({type:4});$.push(e)}for(let e=0;e<n;e++){const e={},t=j.filter(e=>e.size<4);let n=t[Math.floor(Math.random()*t.length)];(!j.length||Math.random()<.4||!n)&&(n=q({type:0,size:0}),j.push(n)),n.size+=1,Object.assign(e,{location:0,x:n.x,y:n.y,currentTarget:n,destination:n,returnTime:1320,assignedHome:n}),H.push(e)}for(let e=0;e<n*i;e++)H[e].destination=U[Math.floor(Math.random()*U.length-1)],H[e].destinationTime=60*(Math.floor(4*Math.random())+6)+Math.floor(30*Math.random()),H[e].returnTime=H[e].destinationTime+480;const L=[...U,...j,...$,I];function _(e,t,r,a){let i,o;e.strokeStyle=r;for(let r=0;r<t.length;r++)o=t[r],i=Math.floor(50*o/n),e.beginPath(),e.moveTo(r,360),e.lineTo(r,360-i),e.stroke();e.beginPath(),e.moveTo(0,360-i),e.lineTo(300,360-i),e.stroke(),e.fillStyle="#000",e.font="10px Lato",e.fillText(`${a}${o}`,0,360-i-2)}function R(e){(!e.wasInfected||Math.random()<b)&&(v++,e.infected=!0,e.timeUntilManifestation=u+24*Math.floor(Math.random()*(m-u))*60,e.willDie=Math.random()<h,e.recover=24*(y+Math.floor(y*Math.random()*.3))*60)}return R(H[0]),{wrapper:P,tick:function(e){H.forEach(t=>{const{currentTarget:n,destination:r,destinationTime:a,returnTime:i,assignedHome:o}=t;if(!t.dead){if(t.currentTarget!=I&&!k)if(r&&a===e&&n==o)t.currentTarget=r;else if(i===e&&n!=o)t.currentTarget=o;else if(!t.social){if(Math.random()<f){const n=j[Math.floor(j.length*Math.random())];t.social=!0,n!=o&&(t.returnTime=e+60*Math.floor(3*Math.random()),t.currentTarget=n)}else if(Math.random()<d){t.social=!0;const n=$[Math.floor($.length*Math.random())];t.returnTime=e+10*Math.floor(30*Math.random()),t.currentTarget=n}t.returnTime>1438&&(t.returnTime=1438)}if(t.infected){if(t.timeUntilManifestation>0&&(t.timeUntilManifestation--,Math.random()<p)){const e=H.filter(e=>{if(e==t||e.infected)return!1;const n=(t.x-e.x)*(t.x-e.x),r=(t.y-e.y)*(t.y-e.y);return Math.sqrt(n+r)<2});e&&e.length&&e.forEach(e=>{Math.random()<p&&R(e)})}0==t.timeUntilManifestation&&(t.timeUntilManifestation=-1,t.willDie?(t.dead=!0,T++):(t.currentTarget=I,x++)),t.currentTarget===I&&t.recover--,0==t.recover&&(t.infected=!1,t.wasInfected=!0,v--,x--,t.currentTarget=t.assignedHome)}t.x+=Math.sign(t.currentTarget.x-t.x),t.y+=Math.sign(t.currentTarget.y-t.y)}}),e%60==0&&(w("infected",v),w("dead",T),w("hospitalized",x)),function(e){const t=A.getContext("2d");t.clearRect(0,0,300,360),L.forEach(e=>{a(t,e,z)});const n=z/6,r=z/6;H.forEach(e=>{const{x:a,y:i,infected:o,dead:l,timeUntilManifestation:s}=e;if(!l){t.fillStyle="rgba(25,25,25,1)",o&&(t.fillStyle="rgb(255,0,0)");const e=a*z-n+Math.floor(Math.random()*n*2),l=i*z-r+Math.floor(Math.random()*n*2);t.beginPath(),t.fillRect(e,l,3,3),t.stroke(),o&&(t.strokeStyle=s<0?"rgb(255,0,0,1)":"rgb(240, 121, 17)",t.beginPath(),t.strokeWidth=2,t.arc(e,l,4,0,2*Math.PI),t.stroke())}}),_(t,S.infected,"rgba(255,125,40, 0.3)","Infected: "),_(t,S.hospitalized,"rgba(255,0,0, 0.3)","Confirmed Cases: "),_(t,S.dead,"rgba(0,0,0, 0.3)","Fatalities: ")}()},day:function(){H.forEach(e=>e.social=!1)},getLegend:o}}function o(){const e=document.createElement("canvas"),t=e.getContext("2d");return e.width=200,e.height=45,t.fillText("Legend",5,8),t.fillText("House",20,21),t.fillText("Work/Commercial",20,38),t.fillText("Hospital",135,21),t.fillText("Social Area",135,38),a(t,{x:1,y:2,type:0},9),a(t,{x:1,y:4,type:1},9),a(t,{x:14,y:2,type:2},9),a(t,{x:14,y:4,type:4},9),e}const l=["speed","slower","faster","stop","setup","virus-setup","simulations","addsimulation","header"].reduce((e,t)=>(e[t]=document.querySelector(`#${t}`),e),{});l.header.appendChild(o()),l.stop.onclick=e=>{m=-1===m?1:-1,l.stop.innerHTML=-1!==m?"Pause":"Start"},l.faster.onclick=e=>{m>0&&m--},l.slower.onclick=e=>{m++};const s={startManifest:"Manifestation Start",manifestUpTo:"Manifestation Delay"};function c(e,t,n){t.forEach(t=>{let r=s[t];if(!r){let e=t.replace(/([A-Z])/g," $1");r=e.charAt(0).toUpperCase()+e.slice(1)}const a=`<div class="input-field col s6">\n          <input value="${e[t]}" id="${t}" type="number" min="0">\n          <label class="active" for="${t}">${r}</label>\n        </div>`,i=document.createElement("div");i.innerHTML=a,l[n].appendChild(i),i.querySelector("input").onchange=n=>{const{value:r}=n.target,a=parseFloat(r);e[t]=a}})}const f=Object.assign({},r);c(f,["populationSize","workerPercent","commercialAreas","socialAreas","visitProbability","socialProbability"],"setup"),c(f.virus,["startManifest","manifestUpTo","spreadProbability","recoveryTime","mortality","reinfectProbability"],"virus-setup");const d=[];function u(){const e=i(f);l.simulations.appendChild(e.wrapper);const t=e.wrapper.querySelector(".sim-control"),n=document.createElement("button");n.className="waves-effect waves-light btn-small red",n.innerText="Remove",n.onclick=()=>{const t=d.indexOf(e);d.splice(t,1),l.simulations.removeChild(e.wrapper)},t.appendChild(n),d.push(e)}u(),l.addsimulation.onclick=e=>u();let m=2,p=m,h=480;!function e(){window.requestAnimationFrame(()=>{p--,p<1&&-1!==m&&(p=m,d.forEach(e=>e.tick(h)),h++,h++>1440&&(h=0,d.forEach(e=>e.day()))),e()})}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BvcHVsYXRpb24vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiREVGQVVMVFMiLCJwb3B1bGF0aW9uU2l6ZSIsIndvcmtlclBlcmNlbnQiLCJjb21tZXJjaWFsQXJlYXMiLCJzb2NpYWxBcmVhcyIsInZpc2l0UHJvYmFiaWxpdHkiLCJzb2NpYWxQcm9iYWJpbGl0eSIsIm1hcFNpemUiLCJ2aXJ1cyIsInN0YXJ0TWFuaWZlc3QiLCJtYW5pZmVzdFVwVG8iLCJzcHJlYWRQcm9iYWJpbGl0eSIsInJlY292ZXJ5VGltZSIsIm1vcnRhbGl0eSIsInJlaW5mZWN0UHJvYmFiaWxpdHkiLCJyZW5kZXJDZWxsIiwiY3R4IiwibG9jIiwicmVzb2x1dGlvbiIsIngiLCJ5IiwidHlwZSIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwic3Ryb2tlU3R5bGUiLCJzdHJva2VSZWN0Iiwic3Ryb2tlIiwiaW5pdGlhbGl6ZVBvcHVsYXRpb24iLCJzZXR0aW5ncyIsImNvbmZpZyIsImFzc2lnbiIsImxhdCIsIk1hdGgiLCJmbG9vciIsInNxcnQiLCJkZWF0aHMiLCJpbmZlY3RlZCIsImhvc3BpdGFsaXplZCIsImlzb2xhdGlvbiIsInN0YXRzIiwiQXJyYXkiLCJmaWxsIiwiZGVhZCIsInVwZGF0ZVN0YXQiLCJzdGF0S2V5IiwiY291bnRlciIsInNwbGljZSIsInB1c2giLCJ3cmFwcGVyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJjYW52YXMiLCJhcHBlbmRDaGlsZCIsImluZmVjdEJ1dHRvbiIsImlubmVyVGV4dCIsImNsYXNzTmFtZSIsIm9uY2xpY2siLCJpbmZlY3QiLCJpbmRpdmlkdWFscyIsImZpbmQiLCJpbmQiLCJpc29sYXRpb25XcmFwcGVyIiwiaW5uZXJIVE1MIiwicXVlcnlTZWxlY3RvciIsIm9uY2hhbmdlIiwiZXZ0IiwidGFyZ2V0IiwiY2hlY2tlZCIsInNldEF0dHJpYnV0ZSIsIm1hcCIsInJlc2lkZW50aWFsIiwiY29tbWVyY2lhbCIsInNvY2lhbCIsImZpbmRGcmVlU3BvdCIsInByb3BzIiwic3BvdCIsInJhbmRvbSIsImhvc3BpdGFsIiwiaW5kaXZpZHVhbCIsImZyZWVIb21lcyIsImZpbHRlciIsInNpemUiLCJhc3NpZ25lZEhvbWUiLCJsZW5ndGgiLCJsb2NhdGlvbiIsImN1cnJlbnRUYXJnZXQiLCJkZXN0aW5hdGlvbiIsInJldHVyblRpbWUiLCJkZXN0aW5hdGlvblRpbWUiLCJob3VzaW5nIiwicmVuZGVyR3JhcGgiLCJzdGF0IiwiY29sb3IiLCJwcmVmaXgiLCJsYXN0WSIsImxhc3RTdGF0IiwiYmVnaW5QYXRoIiwibW92ZVRvIiwibGluZVRvIiwiZm9udCIsImZpbGxUZXh0Iiwid2FzSW5mZWN0ZWQiLCJ0aW1lVW50aWxNYW5pZmVzdGF0aW9uIiwid2lsbERpZSIsInJlY292ZXIiLCJ0aWNrIiwibWludXRlIiwiZm9yRWFjaCIsInZpc2l0IiwibmVhcmVzdCIsIm5laWdoIiwieGQiLCJ5ZCIsInNpZ24iLCJnZXRDb250ZXh0IiwiY2xlYXJSZWN0IiwiaGFsZlgiLCJoYWxmWSIsInhwIiwieXAiLCJzdHJva2VXaWR0aCIsImFyYyIsIlBJIiwicmVuZGVyIiwiZGF5IiwiZ2V0TGVnZW5kIiwiY3ZzIiwid2lkdGgiLCJoZWlnaHQiLCJzZWxlY3RvcnMiLCJyZWR1Y2UiLCJtZW1vIiwiaGVhZGVyIiwic3RvcCIsImUiLCJzcGVlZCIsImZhc3RlciIsInNsb3dlciIsImRpY3Rpb25hcnkiLCJhcHBlbmRDb250cm9scyIsIm9iaiIsImtleXMiLCJpZCIsImZpbmFsUmVzdWx0IiwicmVzdWx0IiwicmVwbGFjZSIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJodG1sIiwibnVtVmFsIiwicGFyc2VGbG9hdCIsImN1cnJlbnRTZXR1cCIsInBvcHVsYXRpb25zIiwiYWRkUG9wdWxhdGlvbiIsInBvcCIsInNpbXVsYXRpb25zIiwiYWN0aW9uIiwiZGVsQnRuIiwiaWR4IiwiaW5kZXhPZiIsInJlbW92ZUNoaWxkIiwiYWRkc2ltdWxhdGlvbiIsImN1cnJlbnRJbmRleCIsIndpbmRvdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxh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Q0lBLEVBQWUsSUFBZ0IsSUFBWDVCLElBQ3BCNEIsRUFBZTVCLEVBQ2ZrQixFQUFZOUMsUUFBUWdELEdBQU9BLEVBQUlsRCxLQUFLQyxJQUNwQ0EsSUFDSUEsSUFBVyxPQUNYQSxFQUFTLEVBQ1QrQyxFQUFZOUMsUUFBUWdELEdBQU9BLEVBQUkvQixTQUl2Q25CLE1BSVJBIiwiZmlsZSI6InNob3djYXNlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIi8qKlxuLSBwb3B1bGF0aW9uIHNpemU6IDEwMFxuLSBhY3RpdmUgd29ya2VyIHBlcmNlbnQ6IDAuNiBcbi0gY29tZXJjaWFsIGFyZWFzOiAxMFxuICovXG5cbmNvbnN0IENBTlZBU19XSURUSCA9IDMwMFxuY29uc3QgR1JBUEhfSEVJR0hUID0gNTBcbmNvbnN0IFBBRERJTkcgPSAxMFxuY29uc3QgQ0FOVkFTX0hFSUdIVCA9IDMwMCArIEdSQVBIX0hFSUdIVCArIFBBRERJTkdcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRTID0ge1xuICAgIHBvcHVsYXRpb25TaXplOiA1MDAsXG4gICAgd29ya2VyUGVyY2VudDogMC43LFxuICAgIGNvbW1lcmNpYWxBcmVhczogNixcbiAgICBzb2NpYWxBcmVhczogNSxcbiAgICB2aXNpdFByb2JhYmlsaXR5OiAwLjAwMDEsXG4gICAgc29jaWFsUHJvYmFiaWxpdHk6IDAuMDAwMixcbiAgICBtYXBTaXplOiBbMzAsIDMwXSxcbiAgICB2aXJ1czoge1xuICAgICAgICBzdGFydE1hbmlmZXN0OiAyLFxuICAgICAgICBtYW5pZmVzdFVwVG86IDYsXG4gICAgICAgIHNwcmVhZFByb2JhYmlsaXR5OiAwLjA0LFxuICAgICAgICByZWNvdmVyeVRpbWU6IDQsXG4gICAgICAgIG1vcnRhbGl0eTogMC4wOSxcbiAgICAgICAgcmVpbmZlY3RQcm9iYWJpbGl0eTogMC4wMDFcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gcmVuZGVyQ2VsbChjdHgsIGxvYywgcmVzb2x1dGlvbikge1xuICAgIGNvbnN0IHsgeCwgeSwgdHlwZSB9ID0gbG9jO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwyNTUsMCwwLjQpJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwwLDI1NSwwLjQpJ1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyNDAsMTI0LDY0LDAuNCknXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDY0LDY0LDY0LDAuNCknXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSw2NCwyNTUsMC40KSdcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBcblxuICAgIGN0eC5maWxsUmVjdCh4ICogcmVzb2x1dGlvbiAtIHJlc29sdXRpb24gLyAyLCB5ICogcmVzb2x1dGlvbiAtIHJlc29sdXRpb24gLyAyLCByZXNvbHV0aW9uLCByZXNvbHV0aW9uKTtcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgwLDAsMCwwLjMpJztcbiAgICBjdHguc3Ryb2tlUmVjdCh4ICogcmVzb2x1dGlvbiAtIHJlc29sdXRpb24gLyAyLCB5ICogcmVzb2x1dGlvbiAtIHJlc29sdXRpb24gLyAyLCByZXNvbHV0aW9uLCByZXNvbHV0aW9uKTtcbiAgICBjdHguc3Ryb2tlKClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVQb3B1bGF0aW9uKHNldHRpbmdzKSB7XG5cbiAgICBjb25zdCBjb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUUywgc2V0dGluZ3MpO1xuXG4gICAgY29uc3QgeyBwb3B1bGF0aW9uU2l6ZSwgd29ya2VyUGVyY2VudCwgY29tbWVyY2lhbEFyZWFzLCBzb2NpYWxBcmVhcywgdmlydXMsIHZpc2l0UHJvYmFiaWxpdHksIHNvY2lhbFByb2JhYmlsaXR5IH0gPSBjb25maWc7XG4gICAgY29uc3QgeyBzdGFydE1hbmlmZXN0LCBtYW5pZmVzdFVwVG8sIHNwcmVhZFByb2JhYmlsaXR5LCBtb3J0YWxpdHksIHJlY292ZXJ5VGltZSwgcmVpbmZlY3RQcm9iYWJpbGl0eSB9ID0gdmlydXM7XG5cbiAgICBjb25zdCBsYXQgPSBNYXRoLmZsb29yKE1hdGguc3FydChwb3B1bGF0aW9uU2l6ZSkpICsgY29tbWVyY2lhbEFyZWFzICsgc29jaWFsQXJlYXM7XG5cblxuICAgIGNvbmZpZy5tYXBTaXplID0gW2xhdCwgbGF0XTtcblxuXG5cbiAgICBjb25zdCB7IG1hcFNpemUgfSA9IGNvbmZpZztcblxuXG4gICAgbGV0IGRlYXRocyA9IDA7XG4gICAgbGV0IGluZmVjdGVkID0gMDtcbiAgICBsZXQgaG9zcGl0YWxpemVkID0gMDtcblxuICAgIGxldCBpc29sYXRpb24gPSBmYWxzZTtcblxuICAgIGNvbnN0IHN0YXRzID0ge1xuICAgICAgICBpbmZlY3RlZDogbmV3IEFycmF5KENBTlZBU19XSURUSCkuZmlsbCgwKSxcbiAgICAgICAgaG9zcGl0YWxpemVkOiBuZXcgQXJyYXkoQ0FOVkFTX1dJRFRIKS5maWxsKDApLFxuICAgICAgICBkZWFkOiBuZXcgQXJyYXkoQ0FOVkFTX1dJRFRIKS5maWxsKDApLFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVN0YXQoc3RhdEtleSwgY291bnRlcikge1xuICAgICAgICBzdGF0c1tzdGF0S2V5XS5zcGxpY2UoMCwgMSk7XG4gICAgICAgIHN0YXRzW3N0YXRLZXldLnB1c2goY291bnRlcilcbiAgICB9XG5cbiAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXG4gICAgd3JhcHBlci5zdHlsZSA9IFwiZGlzcGxheTogaW5saW5lLWJsb2NrOyBwYWRkaW5nOiAxMHB4OyBib3JkZXI6IDFweCBzb2xpZCAjMDAwOyBtYXJnaW46IDVweDtcIjtcblxuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoY2FudmFzKTtcblxuXG4gICAgY29uc3QgaW5mZWN0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICBpbmZlY3RCdXR0b24uaW5uZXJUZXh0ID0gJ0luZmVjdCc7XG4gICAgaW5mZWN0QnV0dG9uLmNsYXNzTmFtZSA9ICd3YXZlcy1lZmZlY3Qgd2F2ZXMtbGlnaHQgYnRuLXNtYWxsJztcblxuICAgIGluZmVjdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICBpbmZlY3QoaW5kaXZpZHVhbHMuZmluZChpbmQgPT4gIWluZC5pbmZlY3RlZCkpO1xuICAgIH1cblxuICAgIGNvbnN0IGlzb2xhdGlvbldyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGlzb2xhdGlvbldyYXBwZXIuY2xhc3NOYW1lID0gJ3NpbS1jb250cm9sJztcbiAgICBpc29sYXRpb25XcmFwcGVyLnN0eWxlID0gJ21hcmdpbi10b3A6IDEwcHgnO1xuICAgIGlzb2xhdGlvbldyYXBwZXIuaW5uZXJIVE1MID0gYDxsYWJlbD5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiICAvPlxuICAgICAgICA8c3Bhbj5Gb3JjZSBJc29sYXRpb248L3NwYW4+XG4gICAgPC9sYWJlbD5gO1xuXG4gICAgaXNvbGF0aW9uV3JhcHBlci5hcHBlbmRDaGlsZChpbmZlY3RCdXR0b24pXG5cbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGlzb2xhdGlvbldyYXBwZXIpXG5cbiAgICBjb25zdCBpc29sYXRlID0gaXNvbGF0aW9uV3JhcHBlci5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXG4gICAgaXNvbGF0ZS5vbmNoYW5nZSA9IGV2dCA9PiB7XG4gICAgICAgIGlzb2xhdGlvbiA9IGV2dC50YXJnZXQuY2hlY2tlZDtcbiAgICB9XG5cbiAgICBjYW52YXMuc2V0QXR0cmlidXRlKCd3aWR0aCcsIENBTlZBU19XSURUSClcbiAgICBjYW52YXMuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBDQU5WQVNfSEVJR0hUKVxuXG4gICAgY29uc3QgcmVzb2x1dGlvbiA9IENBTlZBU19XSURUSCAvIG1hcFNpemVbMF07XG5cbiAgICBjb25zdCBtYXAgPSB7fVxuXG4gICAgY29uc3QgcmVzaWRlbnRpYWwgPSBbXTtcbiAgICBjb25zdCBjb21tZXJjaWFsID0gW107XG4gICAgY29uc3Qgc29jaWFsID0gW107XG4gICAgY29uc3QgaW5kaXZpZHVhbHMgPSBbXTtcblxuICAgIGNvbnN0IGZpbmRGcmVlU3BvdCA9IChwcm9wcykgPT4ge1xuICAgICAgICBsZXQgc3BvdDtcblxuICAgICAgICB3aGlsZSAoIXNwb3QpIHtcbiAgICAgICAgICAgIGNvbnN0IHggPSAxICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1hcFNpemVbMF0gLSAxKSlcbiAgICAgICAgICAgIGNvbnN0IHkgPSAxICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1hcFNpemVbMV0gLSAxKSlcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGAke3h9LSR7eX1gO1xuXG4gICAgICAgICAgICBpZiAoIW1hcFtrZXldKSB7XG4gICAgICAgICAgICAgICAgc3BvdCA9IE9iamVjdC5hc3NpZ24oe30sIHByb3BzLCB7IHgsIHkgfSk7XG4gICAgICAgICAgICAgICAgbWFwW2tleV0gPSBzcG90O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNwb3Q7XG4gICAgfVxuXG4gICAgY29uc3QgaG9zcGl0YWwgPSBmaW5kRnJlZVNwb3QoeyB0eXBlOiAyIH0pXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbW1lcmNpYWxBcmVhczsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHNwb3QgPSBmaW5kRnJlZVNwb3QoeyB0eXBlOiAxIH0pO1xuICAgICAgICBjb21tZXJjaWFsLnB1c2goc3BvdClcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvY2lhbEFyZWFzOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc3BvdCA9IGZpbmRGcmVlU3BvdCh7IHR5cGU6IDQgfSk7XG4gICAgICAgIHNvY2lhbC5wdXNoKHNwb3QpXG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb3B1bGF0aW9uU2l6ZTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGluZGl2aWR1YWwgPSB7fVxuICAgICAgICBjb25zdCBmcmVlSG9tZXMgPSByZXNpZGVudGlhbC5maWx0ZXIoc3BvdCA9PiBzcG90LnNpemUgPCA0KTtcbiAgICAgICAgbGV0IGFzc2lnbmVkSG9tZSA9IGZyZWVIb21lc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBmcmVlSG9tZXMubGVuZ3RoKV07XG4gICAgICAgIGlmICghcmVzaWRlbnRpYWwubGVuZ3RoIHx8IE1hdGgucmFuZG9tKCkgPCAwLjQgfHwgIWFzc2lnbmVkSG9tZSkge1xuICAgICAgICAgICAgYXNzaWduZWRIb21lID0gZmluZEZyZWVTcG90KHsgdHlwZTogMCwgc2l6ZTogMCB9KTtcbiAgICAgICAgICAgIHJlc2lkZW50aWFsLnB1c2goYXNzaWduZWRIb21lKTtcbiAgICAgICAgfVxuICAgICAgICBhc3NpZ25lZEhvbWUuc2l6ZSArPSAxXG4gICAgICAgIE9iamVjdC5hc3NpZ24oaW5kaXZpZHVhbCwge1xuICAgICAgICAgICAgbG9jYXRpb246IDAsXG4gICAgICAgICAgICB4OiBhc3NpZ25lZEhvbWUueCxcbiAgICAgICAgICAgIHk6IGFzc2lnbmVkSG9tZS55LFxuICAgICAgICAgICAgY3VycmVudFRhcmdldDogYXNzaWduZWRIb21lLFxuICAgICAgICAgICAgZGVzdGluYXRpb246IGFzc2lnbmVkSG9tZSxcbiAgICAgICAgICAgIHJldHVyblRpbWU6IDIyICogNjAsXG4gICAgICAgICAgICBhc3NpZ25lZEhvbWVcbiAgICAgICAgfSk7XG4gICAgICAgIGluZGl2aWR1YWxzLnB1c2goaW5kaXZpZHVhbClcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvcHVsYXRpb25TaXplICogd29ya2VyUGVyY2VudDsgaSsrKSB7XG4gICAgICAgIGluZGl2aWR1YWxzW2ldLmRlc3RpbmF0aW9uID0gY29tbWVyY2lhbFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb21tZXJjaWFsLmxlbmd0aCAtIDEpXTtcbiAgICAgICAgaW5kaXZpZHVhbHNbaV0uZGVzdGluYXRpb25UaW1lID0gKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQpICsgNikgKiA2MCArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMwKVxuICAgICAgICBpbmRpdmlkdWFsc1tpXS5yZXR1cm5UaW1lID0gaW5kaXZpZHVhbHNbaV0uZGVzdGluYXRpb25UaW1lICsgOCAqIDYwO1xuICAgIH1cblxuXG4gICAgY29uc3QgaG91c2luZyA9IFsuLi5jb21tZXJjaWFsLCAuLi5yZXNpZGVudGlhbCwgLi4uc29jaWFsLCBob3NwaXRhbF07XG5cblxuXG4gICAgZnVuY3Rpb24gcmVuZGVyKG1pbnV0ZSkge1xuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBDQU5WQVNfV0lEVEgsIENBTlZBU19IRUlHSFQpXG4gICAgICAgIGhvdXNpbmcuZm9yRWFjaChsb2MgPT4ge1xuICAgICAgICAgICAgcmVuZGVyQ2VsbChjdHgsIGxvYywgcmVzb2x1dGlvbilcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBoYWxmWCA9IHJlc29sdXRpb24gLyA2O1xuICAgICAgICBjb25zdCBoYWxmWSA9IHJlc29sdXRpb24gLyA2O1xuICAgICAgICBpbmRpdmlkdWFscy5mb3JFYWNoKGluZCA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHgsIHksIGluZmVjdGVkLCBkZWFkLCB0aW1lVW50aWxNYW5pZmVzdGF0aW9uIH0gPSBpbmQ7XG5cbiAgICAgICAgICAgIGlmICghZGVhZCkge1xuICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyNSwyNSwyNSwxKSc7XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5mZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2IoMjU1LDAsMCknO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IHhwID0geCAqIHJlc29sdXRpb24gLSBoYWxmWCArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGhhbGZYICogMilcbiAgICAgICAgICAgICAgICBjb25zdCB5cCA9IHkgKiByZXNvbHV0aW9uIC0gaGFsZlkgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBoYWxmWCAqIDIpXG4gICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCh4cCwgeXAsIDMsIDMpO1xuICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKVxuXG4gICAgICAgICAgICAgICAgaWYgKGluZmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aW1lVW50aWxNYW5pZmVzdGF0aW9uIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gYHJnYigyNTUsMCwwLDEpYFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gYHJnYigyNDAsIDEyMSwgMTcpYFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVdpZHRoID0gMlxuICAgICAgICAgICAgICAgICAgICBjdHguYXJjKHhwLCB5cCwgNCwgMCwgMiAqIE1hdGguUEkpO1xuICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuXG4gICAgICAgIHJlbmRlckdyYXBoKGN0eCwgc3RhdHMuaW5mZWN0ZWQsICdyZ2JhKDI1NSwxMjUsNDAsIDAuMyknLCAnSW5mZWN0ZWQ6ICcpXG4gICAgICAgIHJlbmRlckdyYXBoKGN0eCwgc3RhdHMuaG9zcGl0YWxpemVkLCAncmdiYSgyNTUsMCwwLCAwLjMpJywgJ0NvbmZpcm1lZCBDYXNlczogJylcbiAgICAgICAgcmVuZGVyR3JhcGgoY3R4LCBzdGF0cy5kZWFkLCAncmdiYSgwLDAsMCwgMC4zKScsICdGYXRhbGl0aWVzOiAnKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbmRlckdyYXBoKGN0eCwgc3RhdCwgY29sb3IsIHByZWZpeCkge1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBjb2xvclxuXG5cbiAgICAgICAgbGV0IGxhc3RZLCBsYXN0U3RhdDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGF0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsYXN0U3RhdCA9IHN0YXRbaV1cbiAgICAgICAgICAgIGxhc3RZID0gTWF0aC5mbG9vcihsYXN0U3RhdCAqIEdSQVBIX0hFSUdIVCAvIHBvcHVsYXRpb25TaXplKVxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgY3R4Lm1vdmVUbyhpLCBDQU5WQVNfSEVJR0hUKTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8oaSwgQ0FOVkFTX0hFSUdIVCAtIGxhc3RZKTtcbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lm1vdmVUbygwLCBDQU5WQVNfSEVJR0hUIC0gbGFzdFkpO1xuICAgICAgICBjdHgubGluZVRvKENBTlZBU19XSURUSCwgQ0FOVkFTX0hFSUdIVCAtIGxhc3RZKTtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7XG4gICAgICAgIGN0eC5mb250ID0gXCIxMHB4IExhdG9cIjtcbiAgICAgICAgY3R4LmZpbGxUZXh0KGAke3ByZWZpeH0ke2xhc3RTdGF0fWAsIDAsIENBTlZBU19IRUlHSFQgLSBsYXN0WSAtIDIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluZmVjdChpbmRpdmlkdWFsKSB7XG4gICAgICAgIGlmICghaW5kaXZpZHVhbC53YXNJbmZlY3RlZCB8fCBNYXRoLnJhbmRvbSgpIDwgcmVpbmZlY3RQcm9iYWJpbGl0eSkge1xuICAgICAgICAgICAgaW5mZWN0ZWQrKztcbiAgICAgICAgICAgIGluZGl2aWR1YWwuaW5mZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgaW5kaXZpZHVhbC50aW1lVW50aWxNYW5pZmVzdGF0aW9uID1cbiAgICAgICAgICAgICAgICBzdGFydE1hbmlmZXN0ICtcbiAgICAgICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWFuaWZlc3RVcFRvIC0gc3RhcnRNYW5pZmVzdCkpXG4gICAgICAgICAgICAgICAgKiAyNCAqIDYwO1xuICAgICAgICAgICAgaW5kaXZpZHVhbC53aWxsRGllID0gTWF0aC5yYW5kb20oKSA8IG1vcnRhbGl0eTtcbiAgICAgICAgICAgIGluZGl2aWR1YWwucmVjb3ZlciA9IChyZWNvdmVyeVRpbWUgKyBNYXRoLmZsb29yKHJlY292ZXJ5VGltZSAqIE1hdGgucmFuZG9tKCkgKiAwLjMpKSAqIDI0ICogNjA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpbmZlY3QoaW5kaXZpZHVhbHNbMF0pXG5cbiAgICBmdW5jdGlvbiB0aWNrKG1pbnV0ZSkge1xuXG4gICAgICAgIGluZGl2aWR1YWxzLmZvckVhY2goaW5kID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgY3VycmVudFRhcmdldCwgZGVzdGluYXRpb24sIGRlc3RpbmF0aW9uVGltZSwgcmV0dXJuVGltZSwgYXNzaWduZWRIb21lIH0gPSBpbmQ7XG5cbiAgICAgICAgICAgIGlmICghaW5kLmRlYWQpIHtcblxuICAgICAgICAgICAgICAgIGlmIChpbmQuY3VycmVudFRhcmdldCAhPSBob3NwaXRhbCAmJiAhaXNvbGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvblRpbWUgPT09IG1pbnV0ZSAmJiBjdXJyZW50VGFyZ2V0ID09IGFzc2lnbmVkSG9tZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kLmN1cnJlbnRUYXJnZXQgPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXR1cm5UaW1lID09PSBtaW51dGUgJiYgY3VycmVudFRhcmdldCAhPSBhc3NpZ25lZEhvbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZC5jdXJyZW50VGFyZ2V0ID0gYXNzaWduZWRIb21lO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFpbmQuc29jaWFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IHZpc2l0UHJvYmFiaWxpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2aXNpdCA9IHJlc2lkZW50aWFsW01hdGguZmxvb3IocmVzaWRlbnRpYWwubGVuZ3RoICogTWF0aC5yYW5kb20oKSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZC5zb2NpYWwgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZpc2l0ICE9IGFzc2lnbmVkSG9tZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmQucmV0dXJuVGltZSA9IG1pbnV0ZSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpICogNjBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kLmN1cnJlbnRUYXJnZXQgPSB2aXNpdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKE1hdGgucmFuZG9tKCkgPCBzb2NpYWxQcm9iYWJpbGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZC5zb2NpYWwgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmlzaXQgPSBzb2NpYWxbTWF0aC5mbG9vcihzb2NpYWwubGVuZ3RoICogTWF0aC5yYW5kb20oKSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZC5yZXR1cm5UaW1lID0gbWludXRlICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMzApICogMTBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmQuY3VycmVudFRhcmdldCA9IHZpc2l0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kLnJldHVyblRpbWUgPiAyNCAqIDYwIC0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZC5yZXR1cm5UaW1lID0gMjQgKiA2MCAtIDI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5kLmluZmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmQudGltZVVudGlsTWFuaWZlc3RhdGlvbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZC50aW1lVW50aWxNYW5pZmVzdGF0aW9uLS07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IHNwcmVhZFByb2JhYmlsaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmVhcmVzdCA9IGluZGl2aWR1YWxzLmZpbHRlcihuZWlnaCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZWlnaCA9PSBpbmQgfHwgbmVpZ2guaW5mZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB4ZCA9IChpbmQueCAtIG5laWdoLngpICogKGluZC54IC0gbmVpZ2gueCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHlkID0gKGluZC55IC0gbmVpZ2gueSkgKiAoaW5kLnkgLSBuZWlnaC55KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguc3FydCh4ZCArIHlkKSA8IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5lYXJlc3QgJiYgbmVhcmVzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVhcmVzdC5mb3JFYWNoKG5laWdoID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgc3ByZWFkUHJvYmFiaWxpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZlY3QobmVpZ2gpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmQudGltZVVudGlsTWFuaWZlc3RhdGlvbiA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmQudGltZVVudGlsTWFuaWZlc3RhdGlvbiA9IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZC53aWxsRGllKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kLmRlYWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYXRocysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmQuY3VycmVudFRhcmdldCA9IGhvc3BpdGFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvc3BpdGFsaXplZCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZC5jdXJyZW50VGFyZ2V0ID09PSBob3NwaXRhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kLnJlY292ZXItLTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmQucmVjb3ZlciA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZC5pbmZlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kLndhc0luZmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZmVjdGVkLS07XG4gICAgICAgICAgICAgICAgICAgICAgICBob3NwaXRhbGl6ZWQtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZC5jdXJyZW50VGFyZ2V0ID0gaW5kLmFzc2lnbmVkSG9tZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgICAgICAgICBpbmQueCArPSBNYXRoLnNpZ24oaW5kLmN1cnJlbnRUYXJnZXQueCAtIGluZC54KVxuICAgICAgICAgICAgICAgIGluZC55ICs9IE1hdGguc2lnbihpbmQuY3VycmVudFRhcmdldC55IC0gaW5kLnkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKG1pbnV0ZSAlIDYwID09PSAwKSB7XG4gICAgICAgICAgICB1cGRhdGVTdGF0KCdpbmZlY3RlZCcsIGluZmVjdGVkKVxuICAgICAgICAgICAgdXBkYXRlU3RhdCgnZGVhZCcsIGRlYXRocylcbiAgICAgICAgICAgIHVwZGF0ZVN0YXQoJ2hvc3BpdGFsaXplZCcsIGhvc3BpdGFsaXplZClcbiAgICAgICAgfVxuXG5cblxuICAgICAgICByZW5kZXIobWludXRlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkYXkoKSB7XG4gICAgICAgIGluZGl2aWR1YWxzLmZvckVhY2goaW5kID0+IGluZC5zb2NpYWwgPSBmYWxzZSk7XG4gICAgfVxuXG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgICAgd3JhcHBlcixcbiAgICAgICAgdGljayxcbiAgICAgICAgZGF5LFxuICAgICAgICBnZXRMZWdlbmRcbiAgICB9XG5cblxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGVnZW5kKCkge1xuICAgIGNvbnN0IGN2cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpXG4gICAgY29uc3QgY3R4ID0gY3ZzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICBjdnMud2lkdGggPSAyMDA7XG4gICAgY3ZzLmhlaWdodCA9IDQ1O1xuXG4gICAgY3R4LmZpbGxUZXh0KFwiTGVnZW5kXCIsIDUsIDgpO1xuICAgIGN0eC5maWxsVGV4dChcIkhvdXNlXCIsIDIwLCAyMSk7XG4gICAgY3R4LmZpbGxUZXh0KFwiV29yay9Db21tZXJjaWFsXCIsIDIwLCAzOCk7XG5cbiAgICBjdHguZmlsbFRleHQoXCJIb3NwaXRhbFwiLCAxMzUsIDIxKTtcbiAgICBjdHguZmlsbFRleHQoXCJTb2NpYWwgQXJlYVwiLCAxMzUsIDM4KTtcblxuICAgIHJlbmRlckNlbGwoY3R4LCB7IHg6IDEsIHk6IDIsIHR5cGU6IDAgfSwgOSlcbiAgICByZW5kZXJDZWxsKGN0eCwgeyB4OiAxLCB5OiA0LCB0eXBlOiAxIH0sIDkpXG5cbiAgICByZW5kZXJDZWxsKGN0eCwgeyB4OiAxNCwgeTogMiwgdHlwZTogMiB9LCA5KVxuICAgIHJlbmRlckNlbGwoY3R4LCB7IHg6IDE0LCB5OiA0LCB0eXBlOiA0IH0sIDkpXG5cbiAgICBcblxuICAgIHJldHVybiBjdnM7XG5cbn1cbiIsImltcG9ydCB7IERFRkFVTFRTLCBpbml0aWFsaXplUG9wdWxhdGlvbiwgZ2V0TGVnZW5kIH0gZnJvbSAnLi9wb3B1bGF0aW9uJztcblxuY29uc3Qgc2VsZWN0b3JzID0gWydzcGVlZCcsICdzbG93ZXInLCAnZmFzdGVyJywgJ3N0b3AnLCAnc2V0dXAnLCAndmlydXMtc2V0dXAnLCAnc2ltdWxhdGlvbnMnLCAnYWRkc2ltdWxhdGlvbicsICdoZWFkZXInXS5yZWR1Y2UoKG1lbW8sIGtleSkgPT4ge1xuICAgIG1lbW9ba2V5XSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2tleX1gKVxuICAgIHJldHVybiBtZW1vO1xufSwge30pO1xuXG5zZWxlY3RvcnMuaGVhZGVyLmFwcGVuZENoaWxkKGdldExlZ2VuZCgpKVxuXG5zZWxlY3RvcnMuc3RvcC5vbmNsaWNrID0gZSA9PiB7XG4gICAgc3BlZWQgPSBzcGVlZCA9PT0gLTEgPyAxIDogLTE7XG4gICAgc2VsZWN0b3JzLnN0b3AuaW5uZXJIVE1MID0gc3BlZWQgIT09IC0xID8gJ1BhdXNlJyA6ICdTdGFydCc7XG59XG5cbnNlbGVjdG9ycy5mYXN0ZXIub25jbGljayA9IGUgPT4ge1xuICAgIGlmIChzcGVlZCA+IDApIHtcbiAgICAgICAgc3BlZWQtLVxuICAgIH1cbn1cblxuc2VsZWN0b3JzLnNsb3dlci5vbmNsaWNrID0gZSA9PiB7XG4gICAgc3BlZWQrK1xufVxuXG5jb25zdCBkaWN0aW9uYXJ5ID0ge1xuICAgIFwic3RhcnRNYW5pZmVzdFwiOiBcIk1hbmlmZXN0YXRpb24gU3RhcnRcIixcbiAgICBcIm1hbmlmZXN0VXBUb1wiOiBcIk1hbmlmZXN0YXRpb24gRGVsYXlcIlxufVxuXG5mdW5jdGlvbiBhcHBlbmRDb250cm9scyhvYmosIGtleXMsIGlkKSB7XG4gICAga2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGxldCBmaW5hbFJlc3VsdCA9IGRpY3Rpb25hcnlba2V5XTtcbiAgICAgICAgaWYgKCFmaW5hbFJlc3VsdCkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGtleS5yZXBsYWNlKC8oW0EtWl0pL2csIFwiICQxXCIpO1xuICAgICAgICAgICAgZmluYWxSZXN1bHQgPSByZXN1bHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyByZXN1bHQuc2xpY2UoMSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBodG1sID0gYDxkaXYgY2xhc3M9XCJpbnB1dC1maWVsZCBjb2wgczZcIj5cbiAgICAgICAgICA8aW5wdXQgdmFsdWU9XCIke29ialtrZXldfVwiIGlkPVwiJHtrZXl9XCIgdHlwZT1cIm51bWJlclwiIG1pbj1cIjBcIj5cbiAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJhY3RpdmVcIiBmb3I9XCIke2tleX1cIj4ke2ZpbmFsUmVzdWx0fTwvbGFiZWw+XG4gICAgICAgIDwvZGl2PmBcbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB3cmFwcGVyLmlubmVySFRNTCA9IGh0bWw7XG4gICAgICAgIHNlbGVjdG9yc1tpZF0uYXBwZW5kQ2hpbGQod3JhcHBlcik7XG4gICAgICAgIGNvbnN0IGlucHV0Qm94ID0gd3JhcHBlci5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXG4gICAgICAgIGlucHV0Qm94Lm9uY2hhbmdlID0gZXZ0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IGV2dC50YXJnZXQ7XG4gICAgICAgICAgICBjb25zdCBudW1WYWwgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAgICAgICAgIG9ialtrZXldID0gbnVtVmFsO1xuICAgICAgICB9XG4gICAgfSlcblxufVxuXG5jb25zdCBjdXJyZW50U2V0dXAgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUUyk7XG5hcHBlbmRDb250cm9scyhjdXJyZW50U2V0dXAsIFsncG9wdWxhdGlvblNpemUnLCAnd29ya2VyUGVyY2VudCcsICdjb21tZXJjaWFsQXJlYXMnLCAnc29jaWFsQXJlYXMnLCAndmlzaXRQcm9iYWJpbGl0eScsICdzb2NpYWxQcm9iYWJpbGl0eSddLCAnc2V0dXAnKTtcbmFwcGVuZENvbnRyb2xzKGN1cnJlbnRTZXR1cC52aXJ1cywgWydzdGFydE1hbmlmZXN0JywgJ21hbmlmZXN0VXBUbycsICdzcHJlYWRQcm9iYWJpbGl0eScsICdyZWNvdmVyeVRpbWUnLCAnbW9ydGFsaXR5JywgJ3JlaW5mZWN0UHJvYmFiaWxpdHknXSwgJ3ZpcnVzLXNldHVwJyk7XG5cblxuY29uc3QgcG9wdWxhdGlvbnMgPSBbXVxuZnVuY3Rpb24gYWRkUG9wdWxhdGlvbigpIHtcbiAgICBjb25zdCBwb3AgPSBpbml0aWFsaXplUG9wdWxhdGlvbihjdXJyZW50U2V0dXApO1xuICAgIHNlbGVjdG9ycy5zaW11bGF0aW9ucy5hcHBlbmRDaGlsZChwb3Aud3JhcHBlcilcbiAgICBjb25zdCBhY3Rpb24gPSBwb3Aud3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuc2ltLWNvbnRyb2wnKVxuICAgIGNvbnN0IGRlbEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgZGVsQnRuLmNsYXNzTmFtZSA9ICd3YXZlcy1lZmZlY3Qgd2F2ZXMtbGlnaHQgYnRuLXNtYWxsIHJlZCc7XG4gICAgZGVsQnRuLmlubmVyVGV4dCA9ICdSZW1vdmUnXG4gICAgZGVsQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlkeCA9IHBvcHVsYXRpb25zLmluZGV4T2YocG9wKVxuICAgICAgICBwb3B1bGF0aW9ucy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgc2VsZWN0b3JzLnNpbXVsYXRpb25zLnJlbW92ZUNoaWxkKHBvcC53cmFwcGVyKTtcbiAgICB9XG4gICAgYWN0aW9uLmFwcGVuZENoaWxkKGRlbEJ0bilcbiAgICBwb3B1bGF0aW9ucy5wdXNoKHBvcClcbn1cblxuYWRkUG9wdWxhdGlvbigpO1xuXG5zZWxlY3RvcnMuYWRkc2ltdWxhdGlvbi5vbmNsaWNrID0gZSA9PiBhZGRQb3B1bGF0aW9uKCk7XG5cbmxldCBzcGVlZCA9IDJcbmxldCBjdXJyZW50SW5kZXggPSBzcGVlZDtcbmxldCBtaW51dGUgPSA4ICogNjA7XG5cbmZ1bmN0aW9uIHRpY2soKSB7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIGN1cnJlbnRJbmRleC0tO1xuICAgICAgICBpZiAoY3VycmVudEluZGV4IDwgMSAmJiBzcGVlZCAhPT0gLTEpIHtcbiAgICAgICAgICAgIGN1cnJlbnRJbmRleCA9IHNwZWVkO1xuICAgICAgICAgICAgcG9wdWxhdGlvbnMuZm9yRWFjaChwb3AgPT4gcG9wLnRpY2sobWludXRlKSlcbiAgICAgICAgICAgIG1pbnV0ZSsrO1xuICAgICAgICAgICAgaWYgKG1pbnV0ZSsrID4gNjAgKiAyNCkge1xuICAgICAgICAgICAgICAgIG1pbnV0ZSA9IDA7XG4gICAgICAgICAgICAgICAgcG9wdWxhdGlvbnMuZm9yRWFjaChwb3AgPT4gcG9wLmRheSgpKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgdGljaygpXG4gICAgfSlcbn1cblxudGljaygpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==