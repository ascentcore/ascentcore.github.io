!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);const n={populationSize:500,workerPercent:.7,commercialAreas:6,socialAreas:5,visitProbability:1e-4,socialProbability:2e-4,mapSize:[30,30],virus:{startManifest:1,manifestUpTo:6,spreadProbability:.01,recoveryTime:4,mortality:.09,reinfectProbability:.001}};function a(e,t,r){const{x:n,y:a,type:i}=t;switch(i){case 0:e.fillStyle="rgba(0,255,0,0.4)";break;case 1:e.fillStyle="rgba(0,0,255,0.4)";break;case 2:e.fillStyle="rgba(240,124,64,0.4)";break;case 3:e.fillStyle="rgba(64,64,64,0.4)";break;case 4:e.fillStyle="rgba(255,64,255,0.4)"}e.fillRect(n*r-r/2,a*r-r/2,r,r),e.strokeStyle="rgba(0,0,0,0.3)",e.strokeRect(n*r-r/2,a*r-r/2,r,r),e.stroke()}function i(){const e=document.createElement("canvas"),t=e.getContext("2d");return e.width=200,e.height=45,t.fillText("Legend",5,8),t.fillText("House",20,21),t.fillText("Work/Commercial",20,38),t.fillText("Hospital",135,21),t.fillText("Social Area",135,38),a(t,{x:1,y:2,type:0},9),a(t,{x:1,y:4,type:1},9),a(t,{x:14,y:2,type:2},9),a(t,{x:14,y:4,type:4},9),e}const o=["speed","slower","faster","stop","setup","virus-setup","simulations","addsimulation","header"].reduce((e,t)=>(e[t]=document.querySelector(`#${t}`),e),{}),l=document.createElement("span");l.style="display: inline-block; width: 200px; font-size: 14px; font-family: monospace;",o.header.appendChild(l),o.header.appendChild(i()),o.stop.onclick=e=>{m=-1===m?1:-1,o.stop.innerHTML=-1!==m?"Pause":"Start"},o.faster.onclick=e=>{m>0&&m--},o.slower.onclick=e=>{m++};const s={startManifest:"Manifestation Start (day)",manifestUpTo:"Manifestation Delay (days)",recoveryTime:"Recovery Time (days)"};function c(e,t,r){t.forEach(t=>{let n=s[t];if(!n){let e=t.replace(/([A-Z])/g," $1");n=e.charAt(0).toUpperCase()+e.slice(1)}const a=`<div class="input-field col s6">\n          <input value="${e[t]}" id="${t}" type="number" min="0">\n          <label class="active" for="${t}">${n}</label>\n        </div>`,i=document.createElement("div");i.innerHTML=a,o[r].appendChild(i),i.querySelector("input").onchange=r=>{const{value:n}=r.target,a=parseFloat(n);e[t]=a}})}const f=Object.assign({},n);c(f,["populationSize","workerPercent","commercialAreas","socialAreas","visitProbability","socialProbability"],"setup"),c(f.virus,["startManifest","manifestUpTo","spreadProbability","recoveryTime","mortality","reinfectProbability"],"virus-setup");const d=[];function u(){const e=function(e){const t=Object.assign({},n,e),{populationSize:r,workerPercent:o,commercialAreas:l,socialAreas:s,virus:c,visitProbability:f,socialProbability:d}=t,{startManifest:u,manifestUpTo:m,spreadProbability:p,mortality:h,recoveryTime:y,reinfectProbability:b}=c,g=Math.max(Math.floor(Math.sqrt(r/2+l+s)),30);t.mapSize=[g,g];const{mapSize:M}=t;let T=0,v=0,x=0,k=!1;const w={infected:new Array(450).fill(0),hospitalized:new Array(450).fill(0),dead:new Array(450).fill(0),days:new Array(450).fill(0)};function S(e,t){w[e].splice(0,1),w[e].push(t)}const P=document.createElement("span");P.style="display: inline-block; padding: 10px; border: 1px solid #000; margin: 5px;";const E=document.createElement("canvas");P.appendChild(E);const A=document.createElement("button");A.innerText="Infect",A.className="waves-effect waves-light btn-small",A.onclick=()=>{const e=U.filter(e=>!e.infected);_(e[Math.floor(Math.random()*e.length)])};const z=document.createElement("div");z.className="sim-control",z.style="margin-top: 10px",z.innerHTML='<label>\n        <input type="checkbox"  />\n        <span>Force Isolation</span>\n    </label>',z.appendChild(A),P.appendChild(z),z.querySelector("input").onchange=e=>{k=e.target.checked},E.setAttribute("width",450),E.setAttribute("height",510);const C=450/M[0],$={},O=[],j=[],H=[],U=[],R=e=>{let t;for(;!t;){const r=1+Math.floor(Math.random()*(M[0]-1)),n=1+Math.floor(Math.random()*(M[1]-1)),a=`${r}-${n}`;$[a]||(t=Object.assign({},e,{x:r,y:n}),$[a]=t)}return t},q=R({type:2});for(let e=0;e<l;e++){const e=R({type:1});j.push(e)}for(let e=0;e<s;e++){const e=R({type:4});H.push(e)}for(let e=0;e<r;e++){const e={},t=O.filter(e=>e.size<4);let r=t[Math.floor(Math.random()*t.length)];(!O.length||Math.random()<.4||!r)&&(r=R({type:0,size:0}),O.push(r)),r.size+=1,Object.assign(e,{location:0,offsetX:0,offsetY:0,x:r.x,y:r.y,currentTarget:r,destination:r,returnTime:1320,assignedHome:r}),U.push(e)}for(let e=0;e<r*o;e++)U[e].destination=j[Math.floor(Math.random()*j.length)],U[e].destinationTime=60*(Math.floor(4*Math.random())+6)+Math.floor(30*Math.random()),U[e].workReturnTime=U[e].returnTime=U[e].destinationTime+480;const I=[...j,...O,...H,q];function L(e,t,n,a){let i,o;e.strokeStyle=n;for(let n=0;n<t.length;n++)o=t[n],i=Math.floor(50*o/r),e.beginPath(),e.moveTo(n,510),e.lineTo(n,510-i),e.stroke();e.beginPath(),e.moveTo(0,510-i),e.lineTo(450,510-i),e.stroke(),e.fillStyle="#000",e.font="10px Lato",e.fillText(`${a}${o}`,0,510-i-2)}function _(e){(!e.wasInfected||Math.random()<b)&&(v++,e.infected=!0,e.timeUntilManifestation=24*(u+Math.floor(Math.random()*m))*60,e.willDie=Math.random()<h,e.recover=24*(y+Math.floor(y*Math.random()*.3))*60)}return _(U[0]),{wrapper:P,render:function(e){const t=E.getContext("2d");t.clearRect(0,0,450,510),I.forEach(e=>{a(t,e,C)});const r=C/6,n=C/6;U.forEach(e=>{const{x:a,y:i,infected:o,dead:l,timeUntilManifestation:s}=e;if(!l){t.fillStyle=o?"rgb(255,0,0)":"rgba(25,25,25,1)";const l=a*C-r+e.offsetX,c=i*C-n+e.offsetY;t.beginPath(),t.fillRect(l-1,c-1,2,2),t.stroke(),o&&s>0&&(t.strokeStyle="rgb(255,0,0,1)",t.beginPath(),t.strokeWidth=2,t.arc(l,c,3,0,2*Math.PI),t.stroke())}}),L(t,w.infected,"rgba(255,125,40, 0.3)","Infected: "),L(t,w.hospitalized,"rgba(255,0,0, 0.3)","Hospitalised: "),L(t,w.dead,"rgba(0,0,0, 0.3)","Fatalities: "),L(t,w.days,"rgba(0,0,0, 0.5)","")},tick:function(e){U.forEach(t=>{const{currentTarget:r,destination:n,destinationTime:a,returnTime:i,assignedHome:o}=t;if(!t.dead){if(t.currentTarget!=q&&!k)if(a===e)n&&t.currentTarget===o&&a===e&&(t.currentTarget=n);else if(t.currentTarget!==o&&i===e)t.currentTarget=o;else if(!t.social&&t.currentTarget===o){if(Math.random()<f){const r=O[Math.floor(O.length*Math.random())];r!=o&&(t.social=!0,t.returnTime=e+60*Math.floor(3*Math.random()),t.currentTarget=r)}else if(Math.random()<d){t.social=!0;const r=H[Math.floor(H.length*Math.random())];t.returnTime=e+10*Math.floor(30*Math.random()),t.currentTarget=r}t.returnTime>1438&&(t.returnTime=1438)}if(t.infected){if(t.timeUntilManifestation>0&&(t.timeUntilManifestation--,Math.random()<p)){const e=U.filter(e=>{if(e==t||e.infected)return!1;const r=(t.x-e.x)*(t.x-e.x),n=(t.y-e.y)*(t.y-e.y);return Math.sqrt(r+n)<2});e&&e.length&&e.forEach(e=>{Math.random()<p&&_(e)})}0==t.timeUntilManifestation&&(t.timeUntilManifestation=-1,t.willDie?(t.dead=!0,T++):(t.currentTarget=q,x++)),t.currentTarget===q&&t.recover--,0==t.recover&&(t.infected=!1,t.wasInfected=!0,v--,x--,t.currentTarget=t.assignedHome)}t.x+=Math.sign(t.currentTarget.x-t.x),t.y+=Math.sign(t.currentTarget.y-t.y),Math.random()<.1&&(t.offsetX=Math.floor(Math.random()*C/2)-1),Math.random()<.1&&(t.offsetY=Math.floor(Math.random()*C/2)-1)}}),e%60==0&&(S("infected",v),S("dead",T),S("hospitalized",x),S("days",0===e?r:0))},day:function(){U.forEach(e=>{e.social=!1,e.currentTarget=e.assignedHome,e.returnTime=e.workReturnTime})},getLegend:i}}(f);o.simulations.appendChild(e.wrapper);const t=e.wrapper.querySelector(".sim-control"),r=document.createElement("button");r.className="waves-effect waves-light btn-small red",r.innerText="Remove",r.style="float: right;",r.onclick=()=>{const t=d.indexOf(e);d.splice(t,1),o.simulations.removeChild(e.wrapper)},t.appendChild(r),d.push(e)}u(),o.addsimulation.onclick=e=>u();let m=1,p=m,h=240;window.setInterval(()=>{if(p--,p<1&&-1!==m){p=m,d.forEach(e=>e.tick(h)),h++>1440&&(h=0,d.forEach(e=>e.day()));const e=Math.floor(h/60),t=e>7&&e<19?"☀️":"🌙";l.innerHTML=`Time of day ${t}: ${(""+e).padStart(2,"0")}:${(""+Math.floor(h%60)).padStart(2,"0")}`}},1),function e(){window.requestAnimationFrame(()=>{d.forEach(e=>e.render()),e()})}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BvcHVsYXRpb24vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiREVGQVVMVFMiLCJwb3B1bGF0aW9uU2l6ZSIsIndvcmtlclBlcmNlbnQiLCJjb21tZXJjaWFsQXJlYXMiLCJzb2NpYWxBcmVhcyIsInZpc2l0UHJvYmFiaWxpdHkiLCJzb2NpYWxQcm9iYWJpbGl0eSIsIm1hcFNpemUiLCJ2aXJ1cyIsInN0YXJ0TWFuaWZlc3QiLCJtYW5pZmVzdFVwVG8iLCJzcHJlYWRQcm9iYWJpbGl0eSIsInJlY292ZXJ5VGltZSIsIm1vcnRhbGl0eSIsInJlaW5mZWN0UHJvYmFiaWxpdHkiLCJyZW5kZXJDZWxsIiwiY3R4IiwibG9jIiwicmVzb2x1dGlvbiIsIngiLCJ5IiwidHlwZSIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwic3Ryb2tlU3R5bGUiLCJzdHJva2VSZWN0Iiwic3Ryb2tlIiwiZ2V0TGVnZW5kIiwiY3ZzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiZ2V0Q29udGV4dCIsIndpZHRoIiwiaGVpZ2h0IiwiZmlsbFRleHQiLCJzZWxlY3RvcnMiLCJyZWR1Y2UiLCJtZW1vIiwicXVlcnlTZWxlY3RvciIsInRpbWUiLCJzdHlsZSIsImhlYWRlciIsImFwcGVuZENoaWxkIiwic3RvcCIsIm9uY2xpY2siLCJlIiwic3BlZWQiLCJpbm5lckhUTUwiLCJmYXN0ZXIiLCJzbG93ZXIiLCJkaWN0aW9uYXJ5IiwiYXBwZW5kQ29udHJvbHMiLCJvYmoiLCJrZXlzIiwiaWQiLCJmb3JFYWNoIiwiZmluYWxSZXN1bHQiLCJyZXN1bHQiLCJyZXBsYWNlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsImh0bWwiLCJ3cmFwcGVyIiwib25jaGFuZ2UiLCJldnQiLCJ0YXJnZXQiLCJudW1WYWwiLCJwYXJzZUZsb2F0IiwiY3VycmVudFNldHVwIiwiYXNzaWduIiwicG9wdWxhdGlvbnMiLCJhZGRQb3B1bGF0aW9uIiwicG9wIiwic2V0dGluZ3MiLCJjb25maWciLCJsYXQiLCJNYXRoIiwibWF4IiwiZmxvb3IiLCJzcXJ0IiwiZGVhdGhzIiwiaW5mZWN0ZWQiLCJob3NwaXRhbGl6ZWQiLCJpc29sYXRpb24iLCJzdGF0cyIsIkFycmF5IiwiZmlsbCIsImRlYWQiLCJkYXlzIiwidXBkYXRlU3RhdCIsInN0YXRLZXkiLCJjb3VudGVyIiwic3BsaWNlIiwicHVzaCIsImNhbnZhcyIsImluZmVjdEJ1dHRvbiIsImlubmVyVGV4dCIsImNsYXNzTmFtZSIsImhlYWx0aHkiLCJpbmRpdmlkdWFscyIsImZpbHRlciIsImluZCIsImluZmVjdCIsInJhbmRvbSIsImxlbmd0aCIsImlzb2xhdGlvbldyYXBwZXIiLCJjaGVja2VkIiwic2V0QXR0cmlidXRlIiwiQ0FOVkFTX1dJRFRIIiwibWFwIiwicmVzaWRlbnRpYWwiLCJjb21tZXJjaWFsIiwic29jaWFsIiwiZmluZEZyZWVTcG90IiwicHJvcHMiLCJzcG90IiwiaG9zcGl0YWwiLCJpbmRpdmlkdWFsIiwiZnJlZUhvbWVzIiwic2l6ZSIsImFzc2lnbmVkSG9tZSIsImxvY2F0aW9uIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJjdXJyZW50VGFyZ2V0IiwiZGVzdGluYXRpb24iLCJyZXR1cm5UaW1lIiwiZGVzdGluYXRpb25UaW1lIiwid29ya1JldHVyblRpbWUiLCJob3VzaW5nIiwicmVuZGVyR3JhcGgiLCJzdGF0IiwiY29sb3IiLCJwcmVmaXgiLCJsYXN0WSIsImxhc3RTdGF0IiwiYmVnaW5QYXRoIiwibW92ZVRvIiwibGluZVRvIiwiZm9udCIsIndhc0luZmVjdGVkIiwidGltZVVudGlsTWFuaWZlc3RhdGlvbiIsIndpbGxEaWUiLCJyZWNvdmVyIiwicmVuZGVyIiwibWludXRlIiwiY2xlYXJSZWN0IiwiaGFsZlgiLCJoYWxmWSIsInhwIiwieXAiLCJzdHJva2VXaWR0aCIsImFyYyIsIlBJIiwidGljayIsInZpc2l0IiwibmVhcmVzdCIsIm5laWdoIiwieGQiLCJ5ZCIsInNpZ24iLCJkYXkiLCJpbml0aWFsaXplUG9wdWxhdGlvbiIsInNpbXVsYXRpb25zIiwiYWN0aW9uIiwiZGVsQnRuIiwiaWR4IiwiaW5kZXhPZiIsInJlbW92ZUNoaWxkIiwiYWRkc2ltdWxhdGlvbiIsImN1cnJlbnRJbmRleCIsIndpbmRvdyIsInNldEludGVydmFsIiwiaG91ciIsInBhZFN0YXJ0IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1Ms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QWN1RixPQUFZLEdBQUt3QyxHQUFNQyxTQUFTLEVBQUcsU0FBUyxHQUFLbEcsS0FBS0UsTUFBTW1FLEVBQVMsS0FBSzZCLFNBQVMsRUFBRyxTQUUzSCxHQUVILFNBQVM5QixJQUNMMkIsT0FBT0ksc0JBQXVCLEtBQzFCekcsRUFBWWhCLFFBQVFrQixHQUFPQSxFQUFJd0UsVUFDL0JBLE1BSVJBIiwiZmlsZSI6InNob3djYXNlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImNvbnN0IENBTlZBU19XSURUSCA9IDQ1MFxuY29uc3QgR1JBUEhfSEVJR0hUID0gNTBcbmNvbnN0IFBBRERJTkcgPSAxMFxuY29uc3QgQ0FOVkFTX0hFSUdIVCA9IENBTlZBU19XSURUSCArIEdSQVBIX0hFSUdIVCArIFBBRERJTkdcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRTID0ge1xuICAgIHBvcHVsYXRpb25TaXplOiA1MDAsXG4gICAgd29ya2VyUGVyY2VudDogMC43LFxuICAgIGNvbW1lcmNpYWxBcmVhczogNixcbiAgICBzb2NpYWxBcmVhczogNSxcbiAgICB2aXNpdFByb2JhYmlsaXR5OiAwLjAwMDEsXG4gICAgc29jaWFsUHJvYmFiaWxpdHk6IDAuMDAwMixcbiAgICBtYXBTaXplOiBbMzAsIDMwXSxcbiAgICB2aXJ1czoge1xuICAgICAgICBzdGFydE1hbmlmZXN0OiAxLFxuICAgICAgICBtYW5pZmVzdFVwVG86IDYsXG4gICAgICAgIHNwcmVhZFByb2JhYmlsaXR5OiAwLjAxLFxuICAgICAgICByZWNvdmVyeVRpbWU6IDQsXG4gICAgICAgIG1vcnRhbGl0eTogMC4wOSxcbiAgICAgICAgcmVpbmZlY3RQcm9iYWJpbGl0eTogMC4wMDFcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gcmVuZGVyQ2VsbChjdHgsIGxvYywgcmVzb2x1dGlvbikge1xuICAgIGNvbnN0IHsgeCwgeSwgdHlwZSB9ID0gbG9jO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwyNTUsMCwwLjQpJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwwLDI1NSwwLjQpJ1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyNDAsMTI0LDY0LDAuNCknXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDY0LDY0LDY0LDAuNCknXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSw2NCwyNTUsMC40KSdcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cblxuXG4gICAgY3R4LmZpbGxSZWN0KHggKiByZXNvbHV0aW9uIC0gcmVzb2x1dGlvbiAvIDIsIHkgKiByZXNvbHV0aW9uIC0gcmVzb2x1dGlvbiAvIDIsIHJlc29sdXRpb24sIHJlc29sdXRpb24pO1xuICAgIGN0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKDAsMCwwLDAuMyknO1xuICAgIGN0eC5zdHJva2VSZWN0KHggKiByZXNvbHV0aW9uIC0gcmVzb2x1dGlvbiAvIDIsIHkgKiByZXNvbHV0aW9uIC0gcmVzb2x1dGlvbiAvIDIsIHJlc29sdXRpb24sIHJlc29sdXRpb24pO1xuICAgIGN0eC5zdHJva2UoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZVBvcHVsYXRpb24oc2V0dGluZ3MpIHtcblxuICAgIGNvbnN0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRTLCBzZXR0aW5ncyk7XG5cbiAgICBjb25zdCB7IHBvcHVsYXRpb25TaXplLCB3b3JrZXJQZXJjZW50LCBjb21tZXJjaWFsQXJlYXMsIHNvY2lhbEFyZWFzLCB2aXJ1cywgdmlzaXRQcm9iYWJpbGl0eSwgc29jaWFsUHJvYmFiaWxpdHkgfSA9IGNvbmZpZztcbiAgICBjb25zdCB7IHN0YXJ0TWFuaWZlc3QsIG1hbmlmZXN0VXBUbywgc3ByZWFkUHJvYmFiaWxpdHksIG1vcnRhbGl0eSwgcmVjb3ZlcnlUaW1lLCByZWluZmVjdFByb2JhYmlsaXR5IH0gPSB2aXJ1cztcblxuICAgIGNvbnN0IGxhdCA9IE1hdGgubWF4KE1hdGguZmxvb3IoTWF0aC5zcXJ0KHBvcHVsYXRpb25TaXplIC8gMiArIGNvbW1lcmNpYWxBcmVhcyArIHNvY2lhbEFyZWFzKSksIDMwKTtcblxuXG4gICAgY29uZmlnLm1hcFNpemUgPSBbbGF0LCBsYXRdO1xuXG5cblxuICAgIGNvbnN0IHsgbWFwU2l6ZSB9ID0gY29uZmlnO1xuXG5cbiAgICBsZXQgZGVhdGhzID0gMDtcbiAgICBsZXQgaW5mZWN0ZWQgPSAwO1xuICAgIGxldCBob3NwaXRhbGl6ZWQgPSAwO1xuXG4gICAgbGV0IGlzb2xhdGlvbiA9IGZhbHNlO1xuXG4gICAgY29uc3Qgc3RhdHMgPSB7XG4gICAgICAgIGluZmVjdGVkOiBuZXcgQXJyYXkoQ0FOVkFTX1dJRFRIKS5maWxsKDApLFxuICAgICAgICBob3NwaXRhbGl6ZWQ6IG5ldyBBcnJheShDQU5WQVNfV0lEVEgpLmZpbGwoMCksXG4gICAgICAgIGRlYWQ6IG5ldyBBcnJheShDQU5WQVNfV0lEVEgpLmZpbGwoMCksXG4gICAgICAgIGRheXM6IG5ldyBBcnJheShDQU5WQVNfV0lEVEgpLmZpbGwoMCksXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlU3RhdChzdGF0S2V5LCBjb3VudGVyKSB7XG4gICAgICAgIHN0YXRzW3N0YXRLZXldLnNwbGljZSgwLCAxKTtcbiAgICAgICAgc3RhdHNbc3RhdEtleV0ucHVzaChjb3VudGVyKVxuICAgIH1cblxuICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgICB3cmFwcGVyLnN0eWxlID0gXCJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHBhZGRpbmc6IDEwcHg7IGJvcmRlcjogMXB4IHNvbGlkICMwMDA7IG1hcmdpbjogNXB4O1wiO1xuXG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG5cbiAgICBjb25zdCBpbmZlY3RCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgIGluZmVjdEJ1dHRvbi5pbm5lclRleHQgPSAnSW5mZWN0JztcbiAgICBpbmZlY3RCdXR0b24uY2xhc3NOYW1lID0gJ3dhdmVzLWVmZmVjdCB3YXZlcy1saWdodCBidG4tc21hbGwnO1xuXG4gICAgaW5mZWN0QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGhlYWx0aHkgPSBpbmRpdmlkdWFscy5maWx0ZXIoaW5kID0+ICFpbmQuaW5mZWN0ZWQpXG4gICAgICAgIGluZmVjdChoZWFsdGh5W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGhlYWx0aHkubGVuZ3RoKV0pO1xuICAgIH1cblxuICAgIGNvbnN0IGlzb2xhdGlvbldyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGlzb2xhdGlvbldyYXBwZXIuY2xhc3NOYW1lID0gJ3NpbS1jb250cm9sJztcbiAgICBpc29sYXRpb25XcmFwcGVyLnN0eWxlID0gJ21hcmdpbi10b3A6IDEwcHgnO1xuICAgIGlzb2xhdGlvbldyYXBwZXIuaW5uZXJIVE1MID0gYDxsYWJlbD5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiICAvPlxuICAgICAgICA8c3Bhbj5Gb3JjZSBJc29sYXRpb248L3NwYW4+XG4gICAgPC9sYWJlbD5gO1xuXG4gICAgaXNvbGF0aW9uV3JhcHBlci5hcHBlbmRDaGlsZChpbmZlY3RCdXR0b24pXG5cbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGlzb2xhdGlvbldyYXBwZXIpXG5cbiAgICBjb25zdCBpc29sYXRlID0gaXNvbGF0aW9uV3JhcHBlci5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXG4gICAgaXNvbGF0ZS5vbmNoYW5nZSA9IGV2dCA9PiB7XG4gICAgICAgIGlzb2xhdGlvbiA9IGV2dC50YXJnZXQuY2hlY2tlZDtcbiAgICB9XG5cbiAgICBjYW52YXMuc2V0QXR0cmlidXRlKCd3aWR0aCcsIENBTlZBU19XSURUSClcbiAgICBjYW52YXMuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBDQU5WQVNfSEVJR0hUKVxuXG4gICAgY29uc3QgcmVzb2x1dGlvbiA9IENBTlZBU19XSURUSCAvIG1hcFNpemVbMF07XG5cbiAgICBjb25zdCBtYXAgPSB7fVxuXG4gICAgY29uc3QgcmVzaWRlbnRpYWwgPSBbXTtcbiAgICBjb25zdCBjb21tZXJjaWFsID0gW107XG4gICAgY29uc3Qgc29jaWFsID0gW107XG4gICAgY29uc3QgaW5kaXZpZHVhbHMgPSBbXTtcblxuICAgIGNvbnN0IGZpbmRGcmVlU3BvdCA9IChwcm9wcykgPT4ge1xuICAgICAgICBsZXQgc3BvdDtcblxuICAgICAgICB3aGlsZSAoIXNwb3QpIHtcbiAgICAgICAgICAgIGNvbnN0IHggPSAxICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1hcFNpemVbMF0gLSAxKSlcbiAgICAgICAgICAgIGNvbnN0IHkgPSAxICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1hcFNpemVbMV0gLSAxKSlcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGAke3h9LSR7eX1gO1xuXG4gICAgICAgICAgICBpZiAoIW1hcFtrZXldKSB7XG4gICAgICAgICAgICAgICAgc3BvdCA9IE9iamVjdC5hc3NpZ24oe30sIHByb3BzLCB7IHgsIHkgfSk7XG4gICAgICAgICAgICAgICAgbWFwW2tleV0gPSBzcG90O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNwb3Q7XG4gICAgfVxuXG4gICAgY29uc3QgaG9zcGl0YWwgPSBmaW5kRnJlZVNwb3QoeyB0eXBlOiAyIH0pXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbW1lcmNpYWxBcmVhczsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHNwb3QgPSBmaW5kRnJlZVNwb3QoeyB0eXBlOiAxIH0pO1xuICAgICAgICBjb21tZXJjaWFsLnB1c2goc3BvdClcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvY2lhbEFyZWFzOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc3BvdCA9IGZpbmRGcmVlU3BvdCh7IHR5cGU6IDQgfSk7XG4gICAgICAgIHNvY2lhbC5wdXNoKHNwb3QpXG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb3B1bGF0aW9uU2l6ZTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGluZGl2aWR1YWwgPSB7fVxuICAgICAgICBjb25zdCBmcmVlSG9tZXMgPSByZXNpZGVudGlhbC5maWx0ZXIoc3BvdCA9PiBzcG90LnNpemUgPCA0KTtcbiAgICAgICAgbGV0IGFzc2lnbmVkSG9tZSA9IGZyZWVIb21lc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBmcmVlSG9tZXMubGVuZ3RoKV07XG4gICAgICAgIGlmICghcmVzaWRlbnRpYWwubGVuZ3RoIHx8IE1hdGgucmFuZG9tKCkgPCAwLjQgfHwgIWFzc2lnbmVkSG9tZSkge1xuICAgICAgICAgICAgYXNzaWduZWRIb21lID0gZmluZEZyZWVTcG90KHsgdHlwZTogMCwgc2l6ZTogMCB9KTtcbiAgICAgICAgICAgIHJlc2lkZW50aWFsLnB1c2goYXNzaWduZWRIb21lKTtcbiAgICAgICAgfVxuICAgICAgICBhc3NpZ25lZEhvbWUuc2l6ZSArPSAxXG4gICAgICAgIE9iamVjdC5hc3NpZ24oaW5kaXZpZHVhbCwge1xuICAgICAgICAgICAgbG9jYXRpb246IDAsXG4gICAgICAgICAgICBvZmZzZXRYOiAwLFxuICAgICAgICAgICAgb2Zmc2V0WTogMCxcbiAgICAgICAgICAgIHg6IGFzc2lnbmVkSG9tZS54LFxuICAgICAgICAgICAgeTogYXNzaWduZWRIb21lLnksXG4gICAgICAgICAgICBjdXJyZW50VGFyZ2V0OiBhc3NpZ25lZEhvbWUsXG4gICAgICAgICAgICBkZXN0aW5hdGlvbjogYXNzaWduZWRIb21lLFxuICAgICAgICAgICAgcmV0dXJuVGltZTogMjIgKiA2MCxcbiAgICAgICAgICAgIGFzc2lnbmVkSG9tZVxuICAgICAgICB9KTtcbiAgICAgICAgaW5kaXZpZHVhbHMucHVzaChpbmRpdmlkdWFsKVxuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9wdWxhdGlvblNpemUgKiB3b3JrZXJQZXJjZW50OyBpKyspIHtcbiAgICAgICAgaW5kaXZpZHVhbHNbaV0uZGVzdGluYXRpb24gPSBjb21tZXJjaWFsW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbW1lcmNpYWwubGVuZ3RoKV07XG4gICAgICAgIGluZGl2aWR1YWxzW2ldLmRlc3RpbmF0aW9uVGltZSA9IChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KSArIDYpICogNjAgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzMClcbiAgICAgICAgaW5kaXZpZHVhbHNbaV0ud29ya1JldHVyblRpbWUgPSBpbmRpdmlkdWFsc1tpXS5yZXR1cm5UaW1lID0gaW5kaXZpZHVhbHNbaV0uZGVzdGluYXRpb25UaW1lICsgOCAqIDYwO1xuICAgIH1cblxuICAgIGNvbnN0IGhvdXNpbmcgPSBbLi4uY29tbWVyY2lhbCwgLi4ucmVzaWRlbnRpYWwsIC4uLnNvY2lhbCwgaG9zcGl0YWxdO1xuXG5cblxuICAgIGZ1bmN0aW9uIHJlbmRlcihtaW51dGUpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgQ0FOVkFTX1dJRFRILCBDQU5WQVNfSEVJR0hUKVxuICAgICAgICBob3VzaW5nLmZvckVhY2gobG9jID0+IHtcbiAgICAgICAgICAgIHJlbmRlckNlbGwoY3R4LCBsb2MsIHJlc29sdXRpb24pXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgaGFsZlggPSByZXNvbHV0aW9uIC8gNjtcbiAgICAgICAgY29uc3QgaGFsZlkgPSByZXNvbHV0aW9uIC8gNjtcbiAgICAgICAgaW5kaXZpZHVhbHMuZm9yRWFjaChpbmQgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyB4LCB5LCBpbmZlY3RlZCwgZGVhZCwgdGltZVVudGlsTWFuaWZlc3RhdGlvbiB9ID0gaW5kO1xuXG4gICAgICAgICAgICBpZiAoIWRlYWQpIHtcblxuICAgICAgICAgICAgICAgIGlmIChpbmZlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYigyNTUsMCwwKSc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1LDI1LDI1LDEpJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCB4cCA9IHggKiByZXNvbHV0aW9uIC0gaGFsZlggKyBpbmQub2Zmc2V0WFxuICAgICAgICAgICAgICAgIGNvbnN0IHlwID0geSAqIHJlc29sdXRpb24gLSBoYWxmWSArIGluZC5vZmZzZXRZXG4gICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCh4cCAtIDEsIHlwIC0gMSwgMiwgMik7XG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpXG5cbiAgICAgICAgICAgICAgICBpZiAoaW5mZWN0ZWQgJiYgdGltZVVudGlsTWFuaWZlc3RhdGlvbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gYHJnYigyNTUsMCwwLDEpYFxuICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VXaWR0aCA9IDJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmFyYyh4cCwgeXAsIDMsIDAsIDIgKiBNYXRoLlBJKTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cblxuICAgICAgICByZW5kZXJHcmFwaChjdHgsIHN0YXRzLmluZmVjdGVkLCAncmdiYSgyNTUsMTI1LDQwLCAwLjMpJywgJ0luZmVjdGVkOiAnKVxuICAgICAgICByZW5kZXJHcmFwaChjdHgsIHN0YXRzLmhvc3BpdGFsaXplZCwgJ3JnYmEoMjU1LDAsMCwgMC4zKScsICdIb3NwaXRhbGlzZWQ6ICcpXG4gICAgICAgIHJlbmRlckdyYXBoKGN0eCwgc3RhdHMuZGVhZCwgJ3JnYmEoMCwwLDAsIDAuMyknLCAnRmF0YWxpdGllczogJylcbiAgICAgICAgcmVuZGVyR3JhcGgoY3R4LCBzdGF0cy5kYXlzLCAncmdiYSgwLDAsMCwgMC41KScsICcnKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbmRlckdyYXBoKGN0eCwgc3RhdCwgY29sb3IsIHByZWZpeCkge1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBjb2xvclxuXG5cbiAgICAgICAgbGV0IGxhc3RZLCBsYXN0U3RhdDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGF0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsYXN0U3RhdCA9IHN0YXRbaV1cbiAgICAgICAgICAgIGxhc3RZID0gTWF0aC5mbG9vcihsYXN0U3RhdCAqIEdSQVBIX0hFSUdIVCAvIHBvcHVsYXRpb25TaXplKVxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgY3R4Lm1vdmVUbyhpLCBDQU5WQVNfSEVJR0hUKTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8oaSwgQ0FOVkFTX0hFSUdIVCAtIGxhc3RZKTtcbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lm1vdmVUbygwLCBDQU5WQVNfSEVJR0hUIC0gbGFzdFkpO1xuICAgICAgICBjdHgubGluZVRvKENBTlZBU19XSURUSCwgQ0FOVkFTX0hFSUdIVCAtIGxhc3RZKTtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7XG4gICAgICAgIGN0eC5mb250ID0gXCIxMHB4IExhdG9cIjtcbiAgICAgICAgY3R4LmZpbGxUZXh0KGAke3ByZWZpeH0ke2xhc3RTdGF0fWAsIDAsIENBTlZBU19IRUlHSFQgLSBsYXN0WSAtIDIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluZmVjdChpbmRpdmlkdWFsKSB7XG4gICAgICAgIGlmICghaW5kaXZpZHVhbC53YXNJbmZlY3RlZCB8fCBNYXRoLnJhbmRvbSgpIDwgcmVpbmZlY3RQcm9iYWJpbGl0eSkge1xuICAgICAgICAgICAgaW5mZWN0ZWQrKztcbiAgICAgICAgICAgIGluZGl2aWR1YWwuaW5mZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgaW5kaXZpZHVhbC50aW1lVW50aWxNYW5pZmVzdGF0aW9uID1cbiAgICAgICAgICAgICAgICAoc3RhcnRNYW5pZmVzdCArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYW5pZmVzdFVwVG8pKSlcbiAgICAgICAgICAgICAgICAqIDI0ICogNjA7XG4gICAgICAgICAgICBpbmRpdmlkdWFsLndpbGxEaWUgPSBNYXRoLnJhbmRvbSgpIDwgbW9ydGFsaXR5O1xuICAgICAgICAgICAgaW5kaXZpZHVhbC5yZWNvdmVyID0gKHJlY292ZXJ5VGltZSArIE1hdGguZmxvb3IocmVjb3ZlcnlUaW1lICogTWF0aC5yYW5kb20oKSAqIDAuMykpICogMjQgKiA2MDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGluZmVjdChpbmRpdmlkdWFsc1swXSlcblxuXG4gICAgZnVuY3Rpb24gdGljayhtaW51dGUpIHtcblxuXG4gICAgICAgIGluZGl2aWR1YWxzLmZvckVhY2goaW5kID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgY3VycmVudFRhcmdldCwgZGVzdGluYXRpb24sIGRlc3RpbmF0aW9uVGltZSwgcmV0dXJuVGltZSwgYXNzaWduZWRIb21lIH0gPSBpbmQ7XG5cbiAgICAgICAgICAgIGlmICghaW5kLmRlYWQpIHtcblxuICAgICAgICAgICAgICAgIGlmIChpbmQuY3VycmVudFRhcmdldCAhPSBob3NwaXRhbCAmJiAhaXNvbGF0aW9uKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc3RpbmF0aW9uVGltZSA9PT0gbWludXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVzdGluYXRpb24gJiYgaW5kLmN1cnJlbnRUYXJnZXQgPT09IGFzc2lnbmVkSG9tZSAmJiBkZXN0aW5hdGlvblRpbWUgPT09IG1pbnV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZC5jdXJyZW50VGFyZ2V0ID0gZGVzdGluYXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbmQuY3VycmVudFRhcmdldCAhPT0gYXNzaWduZWRIb21lICYmIHJldHVyblRpbWUgPT09IG1pbnV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kLmN1cnJlbnRUYXJnZXQgPSBhc3NpZ25lZEhvbWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWluZC5zb2NpYWwgJiYgaW5kLmN1cnJlbnRUYXJnZXQgPT09IGFzc2lnbmVkSG9tZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCB2aXNpdFByb2JhYmlsaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmlzaXQgPSByZXNpZGVudGlhbFtNYXRoLmZsb29yKHJlc2lkZW50aWFsLmxlbmd0aCAqIE1hdGgucmFuZG9tKCkpXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2aXNpdCAhPSBhc3NpZ25lZEhvbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kLnNvY2lhbCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kLnJldHVyblRpbWUgPSBtaW51dGUgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzKSAqIDYwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZC5jdXJyZW50VGFyZ2V0ID0gdmlzaXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChNYXRoLnJhbmRvbSgpIDwgc29jaWFsUHJvYmFiaWxpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmQuc29jaWFsID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpc2l0ID0gc29jaWFsW01hdGguZmxvb3Ioc29jaWFsLmxlbmd0aCAqIE1hdGgucmFuZG9tKCkpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmQucmV0dXJuVGltZSA9IG1pbnV0ZSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMwKSAqIDEwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kLmN1cnJlbnRUYXJnZXQgPSB2aXNpdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZC5yZXR1cm5UaW1lID4gMjQgKiA2MCAtIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmQucmV0dXJuVGltZSA9IDI0ICogNjAgLSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGluZC5pbmZlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kLnRpbWVVbnRpbE1hbmlmZXN0YXRpb24gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmQudGltZVVudGlsTWFuaWZlc3RhdGlvbi0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCBzcHJlYWRQcm9iYWJpbGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5lYXJlc3QgPSBpbmRpdmlkdWFscy5maWx0ZXIobmVpZ2ggPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmVpZ2ggPT0gaW5kIHx8IG5laWdoLmluZmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeGQgPSAoaW5kLnggLSBuZWlnaC54KSAqIChpbmQueCAtIG5laWdoLngpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5ZCA9IChpbmQueSAtIG5laWdoLnkpICogKGluZC55IC0gbmVpZ2gueSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQoeGQgKyB5ZCkgPCAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZWFyZXN0ICYmIG5lYXJlc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lYXJlc3QuZm9yRWFjaChuZWlnaCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IHNwcmVhZFByb2JhYmlsaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mZWN0KG5laWdoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kLnRpbWVVbnRpbE1hbmlmZXN0YXRpb24gPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kLnRpbWVVbnRpbE1hbmlmZXN0YXRpb24gPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmQud2lsbERpZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZC5kZWFkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWF0aHMrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kLmN1cnJlbnRUYXJnZXQgPSBob3NwaXRhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3NwaXRhbGl6ZWQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmQuY3VycmVudFRhcmdldCA9PT0gaG9zcGl0YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZC5yZWNvdmVyLS07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kLnJlY292ZXIgPT0gMCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmQuaW5mZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZC53YXNJbmZlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZlY3RlZC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgaG9zcGl0YWxpemVkLS07XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmQuY3VycmVudFRhcmdldCA9IGluZC5hc3NpZ25lZEhvbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cblxuXG4gICAgICAgICAgICAgICAgaW5kLnggKz0gTWF0aC5zaWduKGluZC5jdXJyZW50VGFyZ2V0LnggLSBpbmQueClcbiAgICAgICAgICAgICAgICBpbmQueSArPSBNYXRoLnNpZ24oaW5kLmN1cnJlbnRUYXJnZXQueSAtIGluZC55KVxuXG4gICAgICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjEpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kLm9mZnNldFggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiByZXNvbHV0aW9uIC8gMikgLSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMSkge1xuICAgICAgICAgICAgICAgICAgICBpbmQub2Zmc2V0WSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHJlc29sdXRpb24gLyAyKSAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmIChtaW51dGUgJSA2MCA9PT0gMCkge1xuICAgICAgICAgICAgdXBkYXRlU3RhdCgnaW5mZWN0ZWQnLCBpbmZlY3RlZClcbiAgICAgICAgICAgIHVwZGF0ZVN0YXQoJ2RlYWQnLCBkZWF0aHMpXG4gICAgICAgICAgICB1cGRhdGVTdGF0KCdob3NwaXRhbGl6ZWQnLCBob3NwaXRhbGl6ZWQpXG4gICAgICAgICAgICB1cGRhdGVTdGF0KCdkYXlzJywgbWludXRlID09PSAwID8gcG9wdWxhdGlvblNpemUgOiAwKVxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkYXkoKSB7XG4gICAgICAgIGluZGl2aWR1YWxzLmZvckVhY2goaW5kID0+IHtcbiAgICAgICAgICAgIGluZC5zb2NpYWwgPSBmYWxzZTtcbiAgICAgICAgICAgIGluZC5jdXJyZW50VGFyZ2V0ID0gaW5kLmFzc2lnbmVkSG9tZTtcbiAgICAgICAgICAgIGluZC5yZXR1cm5UaW1lID0gaW5kLndvcmtSZXR1cm5UaW1lO1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgIHJldHVybiB7XG4gICAgICAgIHdyYXBwZXIsXG4gICAgICAgIHJlbmRlcixcbiAgICAgICAgdGljayxcbiAgICAgICAgZGF5LFxuICAgICAgICBnZXRMZWdlbmRcbiAgICB9XG5cblxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGVnZW5kKCkge1xuICAgIGNvbnN0IGN2cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpXG4gICAgY29uc3QgY3R4ID0gY3ZzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICBjdnMud2lkdGggPSAyMDA7XG4gICAgY3ZzLmhlaWdodCA9IDQ1O1xuXG4gICAgY3R4LmZpbGxUZXh0KFwiTGVnZW5kXCIsIDUsIDgpO1xuICAgIGN0eC5maWxsVGV4dChcIkhvdXNlXCIsIDIwLCAyMSk7XG4gICAgY3R4LmZpbGxUZXh0KFwiV29yay9Db21tZXJjaWFsXCIsIDIwLCAzOCk7XG5cbiAgICBjdHguZmlsbFRleHQoXCJIb3NwaXRhbFwiLCAxMzUsIDIxKTtcbiAgICBjdHguZmlsbFRleHQoXCJTb2NpYWwgQXJlYVwiLCAxMzUsIDM4KTtcblxuICAgIHJlbmRlckNlbGwoY3R4LCB7IHg6IDEsIHk6IDIsIHR5cGU6IDAgfSwgOSlcbiAgICByZW5kZXJDZWxsKGN0eCwgeyB4OiAxLCB5OiA0LCB0eXBlOiAxIH0sIDkpXG5cbiAgICByZW5kZXJDZWxsKGN0eCwgeyB4OiAxNCwgeTogMiwgdHlwZTogMiB9LCA5KVxuICAgIHJlbmRlckNlbGwoY3R4LCB7IHg6IDE0LCB5OiA0LCB0eXBlOiA0IH0sIDkpXG5cblxuXG4gICAgcmV0dXJuIGN2cztcblxufVxuIiwiaW1wb3J0IHsgREVGQVVMVFMsIGluaXRpYWxpemVQb3B1bGF0aW9uLCBnZXRMZWdlbmQgfSBmcm9tICcuL3BvcHVsYXRpb24nO1xuXG5jb25zdCBzZWxlY3RvcnMgPSBbJ3NwZWVkJywgJ3Nsb3dlcicsICdmYXN0ZXInLCAnc3RvcCcsICdzZXR1cCcsICd2aXJ1cy1zZXR1cCcsICdzaW11bGF0aW9ucycsICdhZGRzaW11bGF0aW9uJywgJ2hlYWRlciddLnJlZHVjZSgobWVtbywga2V5KSA9PiB7XG4gICAgbWVtb1trZXldID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7a2V5fWApXG4gICAgcmV0dXJuIG1lbW87XG59LCB7fSk7XG5cbmNvbnN0IHRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG50aW1lLnN0eWxlID0gXCJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdpZHRoOiAyMDBweDsgZm9udC1zaXplOiAxNHB4OyBmb250LWZhbWlseTogbW9ub3NwYWNlO1wiXG5cbnNlbGVjdG9ycy5oZWFkZXIuYXBwZW5kQ2hpbGQodGltZSlcbnNlbGVjdG9ycy5oZWFkZXIuYXBwZW5kQ2hpbGQoZ2V0TGVnZW5kKCkpXG5cbnNlbGVjdG9ycy5zdG9wLm9uY2xpY2sgPSBlID0+IHtcbiAgICBzcGVlZCA9IHNwZWVkID09PSAtMSA/IDEgOiAtMTtcbiAgICBzZWxlY3RvcnMuc3RvcC5pbm5lckhUTUwgPSBzcGVlZCAhPT0gLTEgPyAnUGF1c2UnIDogJ1N0YXJ0Jztcbn1cblxuc2VsZWN0b3JzLmZhc3Rlci5vbmNsaWNrID0gZSA9PiB7XG4gICAgaWYgKHNwZWVkID4gMCkge1xuICAgICAgICBzcGVlZC0tXG4gICAgfVxufVxuXG5zZWxlY3RvcnMuc2xvd2VyLm9uY2xpY2sgPSBlID0+IHtcbiAgICBzcGVlZCsrXG59XG5cbmNvbnN0IGRpY3Rpb25hcnkgPSB7XG4gICAgXCJzdGFydE1hbmlmZXN0XCI6IFwiTWFuaWZlc3RhdGlvbiBTdGFydCAoZGF5KVwiLFxuICAgIFwibWFuaWZlc3RVcFRvXCI6IFwiTWFuaWZlc3RhdGlvbiBEZWxheSAoZGF5cylcIixcbiAgICBcInJlY292ZXJ5VGltZVwiOiBcIlJlY292ZXJ5IFRpbWUgKGRheXMpXCJcbn1cblxuZnVuY3Rpb24gYXBwZW5kQ29udHJvbHMob2JqLCBrZXlzLCBpZCkge1xuICAgIGtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBsZXQgZmluYWxSZXN1bHQgPSBkaWN0aW9uYXJ5W2tleV07XG4gICAgICAgIGlmICghZmluYWxSZXN1bHQpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBrZXkucmVwbGFjZSgvKFtBLVpdKS9nLCBcIiAkMVwiKTtcbiAgICAgICAgICAgIGZpbmFsUmVzdWx0ID0gcmVzdWx0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcmVzdWx0LnNsaWNlKDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaHRtbCA9IGA8ZGl2IGNsYXNzPVwiaW5wdXQtZmllbGQgY29sIHM2XCI+XG4gICAgICAgICAgPGlucHV0IHZhbHVlPVwiJHtvYmpba2V5XX1cIiBpZD1cIiR7a2V5fVwiIHR5cGU9XCJudW1iZXJcIiBtaW49XCIwXCI+XG4gICAgICAgICAgPGxhYmVsIGNsYXNzPVwiYWN0aXZlXCIgZm9yPVwiJHtrZXl9XCI+JHtmaW5hbFJlc3VsdH08L2xhYmVsPlxuICAgICAgICA8L2Rpdj5gXG4gICAgICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgd3JhcHBlci5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICBzZWxlY3RvcnNbaWRdLmFwcGVuZENoaWxkKHdyYXBwZXIpO1xuICAgICAgICBjb25zdCBpbnB1dEJveCA9IHdyYXBwZXIucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgICAgICBpbnB1dEJveC5vbmNoYW5nZSA9IGV2dCA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSBldnQudGFyZ2V0O1xuICAgICAgICAgICAgY29uc3QgbnVtVmFsID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgICAgICAgICBvYmpba2V5XSA9IG51bVZhbDtcbiAgICAgICAgfVxuICAgIH0pXG5cbn1cblxuY29uc3QgY3VycmVudFNldHVwID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVFMpO1xuYXBwZW5kQ29udHJvbHMoY3VycmVudFNldHVwLCBbJ3BvcHVsYXRpb25TaXplJywgJ3dvcmtlclBlcmNlbnQnLCAnY29tbWVyY2lhbEFyZWFzJywgJ3NvY2lhbEFyZWFzJywgJ3Zpc2l0UHJvYmFiaWxpdHknLCAnc29jaWFsUHJvYmFiaWxpdHknXSwgJ3NldHVwJyk7XG5hcHBlbmRDb250cm9scyhjdXJyZW50U2V0dXAudmlydXMsIFsnc3RhcnRNYW5pZmVzdCcsICdtYW5pZmVzdFVwVG8nLCAnc3ByZWFkUHJvYmFiaWxpdHknLCAncmVjb3ZlcnlUaW1lJywgJ21vcnRhbGl0eScsICdyZWluZmVjdFByb2JhYmlsaXR5J10sICd2aXJ1cy1zZXR1cCcpO1xuXG5cbmNvbnN0IHBvcHVsYXRpb25zID0gW11cbmZ1bmN0aW9uIGFkZFBvcHVsYXRpb24oKSB7XG4gICAgY29uc3QgcG9wID0gaW5pdGlhbGl6ZVBvcHVsYXRpb24oY3VycmVudFNldHVwKTtcbiAgICBzZWxlY3RvcnMuc2ltdWxhdGlvbnMuYXBwZW5kQ2hpbGQocG9wLndyYXBwZXIpXG4gICAgY29uc3QgYWN0aW9uID0gcG9wLndyYXBwZXIucXVlcnlTZWxlY3RvcignLnNpbS1jb250cm9sJylcbiAgICBjb25zdCBkZWxCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgIGRlbEJ0bi5jbGFzc05hbWUgPSAnd2F2ZXMtZWZmZWN0IHdhdmVzLWxpZ2h0IGJ0bi1zbWFsbCByZWQnO1xuICAgIGRlbEJ0bi5pbm5lclRleHQgPSAnUmVtb3ZlJ1xuICAgIGRlbEJ0bi5zdHlsZSA9ICdmbG9hdDogcmlnaHQ7J1xuICAgIGRlbEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBpZHggPSBwb3B1bGF0aW9ucy5pbmRleE9mKHBvcClcbiAgICAgICAgcG9wdWxhdGlvbnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIHNlbGVjdG9ycy5zaW11bGF0aW9ucy5yZW1vdmVDaGlsZChwb3Aud3JhcHBlcik7XG4gICAgfVxuICAgIGFjdGlvbi5hcHBlbmRDaGlsZChkZWxCdG4pXG4gICAgcG9wdWxhdGlvbnMucHVzaChwb3ApXG59XG5cbmFkZFBvcHVsYXRpb24oKTtcblxuc2VsZWN0b3JzLmFkZHNpbXVsYXRpb24ub25jbGljayA9IGUgPT4gYWRkUG9wdWxhdGlvbigpO1xuXG5sZXQgc3BlZWQgPSAxXG5sZXQgY3VycmVudEluZGV4ID0gc3BlZWQ7XG5sZXQgbWludXRlID0gNCAqIDYwO1xuXG53aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgIGN1cnJlbnRJbmRleC0tO1xuICAgIGlmIChjdXJyZW50SW5kZXggPCAxICYmIHNwZWVkICE9PSAtMSkge1xuICAgICAgICBjdXJyZW50SW5kZXggPSBzcGVlZDtcbiAgICAgICAgcG9wdWxhdGlvbnMuZm9yRWFjaChwb3AgPT4gcG9wLnRpY2sobWludXRlKSlcbiAgICAgICAgaWYgKG1pbnV0ZSsrID4gNjAgKiAyNCkge1xuICAgICAgICAgICAgbWludXRlID0gMDtcbiAgICAgICAgICAgIHBvcHVsYXRpb25zLmZvckVhY2gocG9wID0+IHBvcC5kYXkoKSlcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBob3VyID0gTWF0aC5mbG9vcihtaW51dGUgLyA2MClcbiAgICAgICAgY29uc3QgcHJlZml4ID0gaG91ciA+IDcgJiYgaG91ciA8IDE5ID8gJ+KYgO+4jycgOiAn8J+MmSdcbiAgICAgICAgdGltZS5pbm5lckhUTUwgPSBgVGltZSBvZiBkYXkgJHtwcmVmaXh9OiAkeygnJyArIGhvdXIpLnBhZFN0YXJ0KDIsICcwJyl9OiR7KCcnICsgTWF0aC5mbG9vcihtaW51dGUgJSA2MCkpLnBhZFN0YXJ0KDIsICcwJyl9YFxuICAgIH1cbn0sIDEpXG5cbmZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCAoKSA9PiB7XG4gICAgICAgIHBvcHVsYXRpb25zLmZvckVhY2gocG9wID0+IHBvcC5yZW5kZXIoKSlcbiAgICAgICAgcmVuZGVyKCk7XG4gICAgfSlcbn1cblxucmVuZGVyKCk7XG5cbiJdLCJzb3VyY2VSb290IjoiIn0=